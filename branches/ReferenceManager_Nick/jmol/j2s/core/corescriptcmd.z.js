(function(Kb,Lb,Mb,ua,Nb,Oa,V,Pa,Qa,Ra,K,Hb,Ib,Ob,Z,X,Jb,R,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,l,da){Oa("JS");Pa(["JS.JmolCmdExtension"],"JS.CmdExt","java.lang.Boolean $.Float $.Long $.Short java.util.Hashtable JU.AU $.BS $.Base64 $.Lst $.M3 $.M4 $.Measure $.P3 $.PT $.Quat $.SB $.V3 J.api.Interface J.atomdata.RadiusData J.c.AXES $.STER $.VDW J.i18n.GT JM.Atom $.AtomCollection $.BondSet $.LabelToken JS.SV $.ScriptCompiler $.ScriptError $.ScriptEval $.ScriptInterruption $.ScriptMathProcessor $.ScriptParam $.T JU.BSUtil $.BoxInfo $.C $.Edge $.Elements $.Escape $.Logger $.Parser $.Point3fi $.TempArray JV.FileManager $.JC $.StateManager $.Viewer".split(" "),
function(){c$=Ra(function(){this.sm=this.e=this.vwr=null;this.chk=!1;this.st=this.thisCommand=this.fullCommand=null;this.slen=0;this.lastData=null;Qa(this,arguments)},JS,"CmdExt",null,JS.JmolCmdExtension);Ib(c$,function(){});da(c$,"init",function(a){this.e=a;this.vwr=this.e.vwr;this.sm=this.e.sm;return this},"~O");da(c$,"dispatch",function(a,b,c){this.chk=this.e.chk;this.fullCommand=this.e.fullCommand;this.thisCommand=this.e.thisCommand;this.slen=this.e.slen;this.st=c;switch(a){case 4098:this.assign();
break;case 135270423:this.cache();break;case 4102:this.calculate();break;case 4103:this.capture();break;case 4105:this.centerAt();break;case 135270405:this.compare();break;case 528395:this.console();break;case 4106:this.connect(1);break;case 1095766024:this.configuration();break;case 135270408:this.data();break;case 1612189718:this.connect(0);break;case 1052700:this.mapProperty();break;case 4126:this.minimize();break;case 1276121113:this.modulation();break;case 4131:this.navigate();break;case 4133:case 135270418:case 1052714:this.plot(c);
break;case 135270926:this.show();break;case 528443:this.stereo();break;case 135270422:this.write(null);break;case 23:return this.cgo();case 25:return this.contact();case 17:return this.dipole();case 22:return this.draw();case 24:case 29:case 28:return this.isosurface(a);case 26:return this.lcaoCartoon();case 6:return this.measure(),!0;case 27:return this.mo(b);case 21:return this.polyhedra();case 20:this.ellipsoid();break;case 4:return this.struts()}return!1},"~N,~B,~A");l(c$,"atomExpressionAt",function(a){return this.e.atomExpressionAt(a)},
"~N");l(c$,"checkLength",function(a){this.e.checkLength(a)},"~N");l(c$,"error",function(a){this.e.error(a)},"~N");l(c$,"invArg",function(){this.e.invArg()});l(c$,"invPO",function(){this.error(23)});l(c$,"getShapeProperty",function(a,b){return this.e.getShapeProperty(a,b)},"~N,~S");l(c$,"paramAsStr",function(a){return this.e.paramAsStr(a)},"~N");l(c$,"centerParameter",function(a){return this.e.centerParameter(a)},"~N");l(c$,"floatParameter",function(a){return this.e.floatParameter(a)},"~N");l(c$,"getPoint3f",
function(a,b){return this.e.getPoint3f(a,b)},"~N,~B");l(c$,"getPoint4f",function(a){return this.e.getPoint4f(a)},"~N");l(c$,"intParameter",function(a){return this.e.intParameter(a)},"~N");l(c$,"isFloatParameter",function(a){return this.e.isFloatParameter(a)},"~N");l(c$,"setShapeProperty",function(a,b,c){this.e.setShapeProperty(a,b,c)},"~N,~S,~O");l(c$,"showString",function(a){this.e.showString(a)},"~S");l(c$,"stringParameter",function(a){return this.e.stringParameter(a)},"~N");l(c$,"getToken",function(a){return this.e.getToken(a)},
"~N");l(c$,"tokAt",function(a){return this.e.tokAt(a)},"~N");l(c$,"cache",function(){var a=this.tokAt(1),b=null,c=2;switch(a){case 1276118017:case 1073742119:b=this.e.optParameterAsString(c++);case 1073741882:this.checkLength(c);this.chk||("all".equals(b)&&(b=null),b=this.vwr.cacheFileByName(b,1276118017==a),this.showString(0>b?"cache cleared":b+" bytes "+(1276118017==a?" cached":" removed")));break;default:this.invArg()}});l(c$,"calculate",function(){var a=!1,b=!1,c=null,e=null,d=-2147483648;if(2<=
(this.e.iToken=this.e.slen))switch(this.e.clearDefinedVariableAtomSets(),this.getToken(1).tok){case 1073741824:this.checkLength(2);break;case 1632634891:this.checkLength(2);if(this.chk)return;d=this.vwr.calculateFormalCharges(null);this.showString(J.i18n.GT.i(J.i18n.GT._("{0} charges modified"),d));return;case 1076887572:this.checkLength(2);this.chk||this.vwr.ms.assignAromaticBonds();return;case 1612189718:2!=this.e.slen&&(c=(b=1641025539==this.tokAt(++this.e.iToken))?this.vwr.bsA():this.atomExpressionAt(this.e.iToken),
!b&&1641025539!=this.tokAt(++this.e.iToken)&&(e=this.atomExpressionAt(this.e.iToken)));if(this.chk)return;d=this.vwr.autoHbond(c,e,!1);-2147483648!=d&&this.e.report(J.i18n.GT.i(J.i18n.GT._("{0} hydrogen bonds"),Math.abs(d)));return;case 1613758476:c=2==this.slen?null:this.atomExpressionAt(2);this.e.checkLast(this.e.iToken);this.chk||this.vwr.addHydrogens(c,!1,!1);return;case 1112541195:this.e.iToken=1;c=2==this.slen?null:this.atomExpressionAt(2);this.e.checkLast(this.e.iToken);if(!this.chk)try{this.vwr.calculatePartialCharges(c)}catch(f){if(Z(f,
JV.JmolAsyncException))this.e.loadFileResourceAsync(f.getFileName());else throw f;}return;case 1073742102:this.chk||this.showString(this.vwr.calculatePointGroup());return;case 1112539150:this.checkLength(2);this.chk||(this.vwr.calculateStraightness(),this.vwr.addStateScript("set quaternionFrame '"+this.vwr.getQuaternionFrame()+"'; calculate straightness",!1,!0));return;case 1641025539:c=4>this.slen?null:this.atomExpressionAt(2);switch(this.tokAt(++this.e.iToken)){case 1052714:break;case 1073741916:if(this.chk)return;
this.e.showString(this.vwr.getAnnotationParser().calculateDSSRStructure(this.vwr,c));return;case 1073741915:b=!0;break;case 0:b=this.vwr.getBoolean(603979826);break;default:this.invArg()}this.chk||this.showString(this.vwr.calculateStructures(c,b,!0));return;case 1708058:c=this.e.iToken+1<this.slen?this.atomExpressionAt(++this.e.iToken):null;e=this.e.iToken+1<this.slen?this.atomExpressionAt(++this.e.iToken):null;this.checkLength(++this.e.iToken);this.chk||(d=this.vwr.calculateStruts(c,e),0<d&&(this.setShapeProperty(1,
"type",Integer.$valueOf(32768)),this.e.setShapePropertyBs(1,"color",Integer.$valueOf(16777215),null),this.e.setShapeTranslucency(1,"","translucent",0.5,null),this.setShapeProperty(1,"type",Integer.$valueOf(1023))),this.showString(J.i18n.GT.i(J.i18n.GT._("{0} struts added"),d)));return;case 3145756:a=!0;case 1112539151:b=!1;switch(this.tokAt(2)){case 135266325:this.e.iToken++;break;case 0:b=!a;break;case 1073741952:b=!0;this.e.iToken++;break;default:b=!0}c=this.e.iToken+1<this.slen?this.atomExpressionAt(++this.e.iToken):
this.vwr.bsA();this.checkLength(++this.e.iToken);this.chk||this.vwr.calculateSurface(c,b?3.4028235E38:-1);return}this.e.errorStr2(53,"CALCULATE","aromatic? hbonds? hydrogen? formalCharge? partialCharge? pointgroup? straightness? structure? struts? surfaceDistance FROM? surfaceDistance WITHIN?")});l(c$,"capture",function(){if(!this.chk&&!this.vwr.allowCapture())this.showString("Cannot capture on this platform");else{var a=this.vwr.captureParams,b=null==a?"GIF":a.get("type"),c=0,e=0,d=this.e.slen,f=
"",h=!this.vwr.am.animationReplayMode.name().equals("ONCE"),g=1,k=this.tokAt(g),x=603979967==k;x&&(k=this.tokAt(++g));switch(0==k?k=1150985:k){case 4:f=this.e.optParameterAsString(g++);if(0==f.length){e=1150985;break}a=f.toLowerCase();a.endsWith(".gift")||a.endsWith(".pngt")?(x=!0,f=f.substring(0,f.length-1),a=f.toLowerCase()):!a.endsWith(".gif")&&!a.contains(".png")&&(f+=".gif");a.endsWith(".png")?(a.endsWith("0.png")||(f=f.substring(0,f.length-4)+"0000.png"),b="PNG"):b="GIF";x&&(b+="T");k=f.indexOf("0000.")!=
f.lastIndexOf(".")-4;a=!1;528410==this.tokAt(g)&&(h=!0,this.tokAt(++g));switch(this.tokAt(g)){case 1073742129:a=!0;case 1611141175:c=null;h="y";g++;a?(g<d&&2!=this.tokAt(g)&&(h=this.e.optParameterAsString(g++).toLowerCase()),c=JU.PT.rep("rotate Y 10 10;rotate Y -10 -10;rotate Y -10 -10;rotate Y 10 10","10",""+(g<d?this.intParameter(g++):5))):(g<d&&(h=this.e.optParameterAsString(g++).toLowerCase()),c="rotate Y 360 30;");if(this.chk)return;this.vwr.setNavigationMode(!1);if(""===h||0>"xyz".indexOf(h))h=
"y";d=this.vwr.g.waitForMoveTo;c="set waitformoveto true;"+JU.PT.rep(c,"Y",h)+";set waitformoveto "+d;c="capture "+(x?"transparent ":"")+JU.PT.esc(f)+" LOOP;"+c+";capture end;";this.e.cmdScript(0,null,c);return;case 3:case 2:c=this.floatParameter(g++)}if(this.chk)return;e=1073742032;a=new java.util.Hashtable;x=this.vwr.getInt(553648132);k&&(a.put("streaming",Boolean.TRUE),h||this.showString(J.i18n.GT.o(J.i18n.GT._("Note: Enable looping using {0}"),["ANIMATION MODE LOOP"])),this.showString(J.i18n.GT.o(J.i18n.GT._("Animation delay based on: {0}"),
["ANIMATION FPS "+x])));a.put("captureFps",Integer.$valueOf(x));break;case 1150985:case 1073741874:null!=a&&a.put("captureSilent",Boolean.TRUE);case 1048589:case 1048588:this.checkLength(-2);e=k;break;default:this.invArg()}this.chk||null==a||(a.put("type",b),x=Integer.$valueOf(this.vwr.getBackgroundArgb()),a.put("backgroundColor",x),a.put("fileName",f),a.put("quality",Integer.$valueOf(-1)),a.put("endTime",Long.$valueOf(0>=c?-1:System.currentTimeMillis()+Hb(1E3*c))),a.put("captureMode",JS.T.nameOf(e).toLowerCase()),
a.put("captureLooping",h?Boolean.TRUE:Boolean.FALSE),f=this.vwr.processWriteOrCapture(a),JU.Logger.info(f))}});l(c$,"centerAt",function(){var a=this.getToken(1).tok;switch(a){case 1073741826:case 96:case 1679429641:break;default:this.invArg()}var b=JU.P3.new3(0,0,0);5==this.slen?(b.x=this.floatParameter(2),b.y=this.floatParameter(3),b.z=this.floatParameter(4)):this.e.isCenterParameter(2)?(b=this.centerParameter(2),this.e.checkLast(this.e.iToken)):this.checkLength(2);!this.chk&&!this.vwr.isJmolDataFrame()&&
this.vwr.tm.setCenterAt(a,b)});l(c$,"cgo",function(){var a=this.e;this.sm.loadShape(23);if(1073742001==this.tokAt(1)&&this.listIsosurface(23))return!1;for(var b=0,c=null!=this.initIsosurface(23),e=c&&null==this.getShapeProperty(23,"ID"),d=!1,f=null,h=3.4028235E38,g=[-2147483648],k=0,x=a.iToken;x<this.slen;++x){var z=null,t=null;switch(this.getToken(x).tok){case 7:case 269484096:case 1073742195:(null!=f||e)&&this.invArg();f=a.listParameter(x,2,2147483647);x=a.iToken;continue;case 1073742138:++x>=this.slen&&
this.error(34);switch(this.getToken(x).tok){case 2:k=this.intParameter(x);continue;case 3:k=Math.round(100*this.floatParameter(x));continue}this.error(34);break;case 1766856708:case 603979967:case 1073742074:h=this.getColorTrans(a,x,!1,g);x=a.iToken;c=!0;continue;case 1074790550:this.setShapeId(23,++x,c);e=null==this.getShapeProperty(23,"ID");x=a.iToken;break;default:if(!a.setMeshDisplayProperty(23,0,a.theTok)){if(269484209==a.theTok||JS.T.tokAttr(a.theTok,1073741824)){this.setShapeId(23,x,c);x=a.iToken;
break}this.invArg()}0==b&&(b=x);x=a.iToken;continue}c=12291!=a.theTok;null!=f&&!d&&(z="points",t=Integer.$valueOf(k),d=!0,k=0);null!=z&&this.setShapeProperty(23,z,t)}this.finalizeObject(23,g[0],h,k,null!=f,f,b,null);return!0});l(c$,"compare",function(){var a=!1,b=!1,c=!1,e=!1,d=!1,f=null,h=null,g=null,k=null,x=null,z=null;this.e.iToken=0;var t=this.isFloatParameter(1)?this.floatParameter(++this.e.iToken):NaN,m=this.atomExpressionAt(++this.e.iToken),H=null,n=null;this.e.isArrayParameter(++this.e.iToken)?
H=this.e.getPointArray(this.e.iToken,-1,!1):1141899265!=this.tokAt(this.e.iToken)&&(n=this.atomExpressionAt(this.e.iToken));var l=null,v=!1,G=null,r=JU.BSUtil.copy(m);null!=n&&r.or(n);for(var r=e=null==H&&null!=n&&r.equals(m),q=this.e.iToken+1;q<this.slen;++q)switch(this.getToken(q).tok){case 4115:r=!0;break;case 135267336:if(v=!0,4!=this.tokAt(q+1)){G="*";break}case 135267335:G=this.stringParameter(++q);break;case 1678770178:b=d=!0;G=this.paramAsStr(++q);G.equalsIgnoreCase("SMILES")&&(v=!0,G="*");
break;case 3:case 2:t=Math.abs(this.floatParameter(q));break;case 269484080:break;case 3158024:l=this.atomExpressionAt(++q);q=this.e.iToken;break;case 10:case 1048577:null!=z&&this.invArg();var g=this.atomExpressionAt(this.e.iToken),s=e?0:this.tokAt(this.e.iToken+1),k=null==H&&this.e.isArrayParameter(this.e.iToken+1)?null:10==s||1048577==s?this.atomExpressionAt(++this.e.iToken):JU.BSUtil.copy(g);null!=l&&(g.and(l),null!=k&&k.and(l));null==k?H=this.e.getPointArray(++this.e.iToken,-1,!1):k.and(n);null==
x&&(x=new JU.Lst);x.addLast([g,k]);q=this.e.iToken;break;case 7:null!=x&&this.invArg();a=!0;f=this.e.getQuaternionArray(this.e.theToken.getList(),1073742001);this.getToken(++q);h=this.e.getQuaternionArray(this.e.theToken.getList(),1073742001);null==z&&(z=new JU.Lst);z.addLast([f,h]);break;case 1073742077:a=!0;break;case 135266320:case 1141899265:a=!1;break;case 528432:b=!0;break;case 4160:c=!0;break;default:this.invArg()}if(!this.chk){r&&(t=0);Float.isNaN(t)||0>t?t=1:!b&&!c&&(b=c=!0);e=0!=t;(s=!a&&
null==G||null!=H)&&J.api.Interface.getInterface("JU.Eigen",this.vwr,"script");null==x&&null==z&&(null==l?(g=s?this.vwr.getAtomBitSet("spine"):new JU.BS,0>g.nextSetBit(0)?(g=m,k=n):(k=JU.BSUtil.copy(g),g.and(m),k.and(n))):(g=JU.BSUtil.copy(m),k=JU.BSUtil.copy(n),g.and(l),k.and(l),g.and(m),k.and(n)),x=new JU.Lst,x.addLast([g,k]));if(r){m=this.vwr.ms.getModelBS(m,!1);l=Array(m.cardinality());q=0;for(k=m.nextSetBit(0);0<=k;k=m.nextSetBit(k+1),q++)l[q]=this.vwr.getModelUndeletedAtomsBitSet(k)}else l=[m];
for(k=0;k<l.length;k++){for(var m=l[k],C=R(2,0),B=null,y=new JU.Lst,E=null,F=r?new JU.Lst:x,q=0;q<x.size();++q){var M=x.get(q);r&&F.addLast(M=[JU.BSUtil.copy(M[0]),M[1]]);M[0].and(m)}var S=null,u=null;if(s){null!=H&&(F.clear(),F.addLast([g,H]));try{E=this.vwr.getCenterAndPoints(F,!0)}catch(K){if(Z(K,Exception))this.invArg();else throw K;}B=E[0].length-1;for(q=1;q<=B;q++){y=E[0][q];M=E[1][q];if(!V(y,JM.Atom)||!V(M,JM.Atom))break;JU.Logger.info(" atom 1 "+y.getInfo()+"\tatom 2 "+M.getInfo())}B=JU.Measure.calculateQuaternionRotation(E,
C);q=Float.isNaN(C[1])?NaN:Math.round(100*C[0])/100;C=Float.isNaN(C[1])?NaN:Math.round(100*C[1])/100;this.showString("RMSD "+q+" --\x3e "+C+" Angstroms")}else if(a){if(null==z)for(q=0;q<F.size();q++){M=F.get(q);f=this.vwr.getAtomGroupQuaternions(M[0],2147483647);h=this.vwr.getAtomGroupQuaternions(M[1],2147483647);for(B=0;B<f.length&&B<h.length;B++)y.addLast(h[B].div(f[B]))}else for(B=0;B<f.length&&B<h.length;B++)y.addLast(h[B].div(f[B]));C[0]=0;f=y.toArray(Array(y.size()));B=JU.Quat.sphereMean(f,
C,1E-4);this.showString("RMSD = "+C[0]+" degrees")}else{q=new JU.M4;S=new JU.P3;if(("*".equals(G)||"".equals(G))&&null!=m)try{G=this.vwr.getSmiles(m)}catch(O){if(Z(O,Exception))this.e.evalError(O.getMessage(),null);else throw O;}if(d){var va;if(null==m||null==n||null==(va=this.e.getSmilesExt().getFlexFitList(m,n,G,!v)))break;this.vwr.setDihedrals(va,null,1)}C=this.e.getSmilesExt().getSmilesCorrelation(m,n,G,null,null,q,null,!v,!1,null,S,!1,!1);if(Float.isNaN(C)){this.showString("structures do not match");
break}c&&(u=new JU.V3,q.getTranslation(u));b&&(B=new JU.M3,q.getRotationScale(B),B=JU.Quat.newM(B));this.showString("RMSD = "+C+" Angstroms")}null!=E&&(S=E[0][0]);null==S&&(E=this.vwr.getCenterAndPoints(F,!0),S=E[0][0]);F=new JU.P3;C=NaN;c&&(null==u&&(u=JU.V3.newVsub(E[1][0],S)),C=1E10);b&&(null==B&&this.e.evalError("option not implemented",null),F.add2(S,B.getNormal()),C=B.getTheta(),0==C&&c&&(0.01<u.length()?C=1E10:b=c=e=!1));if(!Float.isNaN(C)&&!Float.isNaN(F.x)&&(E=null,b&&(c&&0!=t)&&(E=this.vwr.ms.getAtomPointVector(m),
q=JS.ScriptMathProcessor.getMatrix4f(B.getMatrix(),u),E=JU.Measure.transformPoints(E,q,S)),this.e.useThreads()||(e=!1),this.vwr.rotateAboutPointsInternal(this.e,S,F,C/t,C,e,m,u,E,null)&&e&&this.e.isJS))throw new JS.ScriptInterruption(this.e,"compare",1);}}});l(c$,"configuration",function(){var a,b=this.vwr.bsA();if(1==this.slen)a=this.vwr.ms.setConformation(b),this.vwr.ms.addStateScript("select",null,b,null,"configuration",!0,!1);else{b=this.intParameter(this.e.checkLast(1));if(this.chk)return;a=
this.vwr.getConformation(this.vwr.am.cmi,b-1,!0);this.vwr.addStateScript("configuration "+b+";",!0,!1)}this.chk||(this.setShapeProperty(1,"type",Integer.$valueOf(30720)),this.e.setShapeSizeBs(1,0,a),this.vwr.autoHbond(a,a,!0),this.vwr.select(a,!1,0,this.e.tQuiet))});l(c$,"measure",function(){var a=this.e,b=null,c=0,e=null;if(2==this.slen)switch(this.tokAt(1)){case 1048588:this.setShapeProperty(6,"hideAll",Boolean.TRUE);return;case 12291:this.chk||this.vwr.clearAllMeasurements();return}this.vwr.shm.loadShape(6);
switch(this.tokAt(1)){case 135267335:var d=this.stringParameter(3==this.slen?2:4);if(this.chk)return;var f=this.vwr.ms.at,b=this.vwr.getAtomCount(),c=null;try{c=this.vwr.getSmilesMatcher().getCorrelationMaps(d,f,b,this.vwr.bsA(),!0,!1)}catch(h){if(Z(h,Exception))a.evalError(h.getMessage(),null);else throw h;}if(null==c)return;this.setShapeProperty(6,"maps",c);return}switch(this.slen){case 2:switch(this.getToken(1).tok){case 0:case 1048589:this.vwr.shm.loadShape(6);this.setShapeProperty(6,"hideAll",
Boolean.FALSE);return;case 1073742001:this.chk||a.showStringPrint(this.vwr.getMeasurementInfoAsString(),!1);return;case 4:this.setShapeProperty(6,"setFormats",this.stringParameter(1));return}a.errorStr(24,"ON, OFF, DELETE");break;case 3:switch(this.getToken(1).tok){case 12291:if(1048579==this.getToken(2).tok)this.chk||this.vwr.clearAllMeasurements();else{var g=this.intParameter(2)-1;this.chk||this.vwr.deleteMeasurement(g)}return}}for(var k=0,x=0,z=-1,t=-1,m=-1,l=X(5,0),n=[3.4028235E38,3.4028235E38],
I=!1,v=!1,G=!1,r=!0,q=null,s=null,d=269484114,C=f=null,B=new JU.Lst,y=new JU.BS,E=null,F=null,M=0,S=0,g=1;g<this.slen;++g)switch(this.getToken(g).tok){case 1074790550:1!=g&&this.invArg();b=a.optParameterAsString(++g);continue;case 1073741824:a.errorStr(24,"ALL, ALLCONNECTED, DELETE");break;default:this.error(15);break;case 269484144:135266310!=this.tokAt(g+1)&&this.invArg();g++;G=!0;break;case 135266310:case 1073741834:case 1048579:v=1073741834==a.theTok;t=-1;I=!0;v&&G&&this.invArg();break;case 1766856708:c=
JU.C.getColix(a.getArgbParam(++g));g=a.iToken;break;case 1073742066:a.isPoint3f(++g)?(e=this.getPoint3f(g,!1),e=[1,e.x,e.y,e.z,0,0,0]):e=a.floatParameterSet(g,7,7);g=a.iToken;break;case 1666189314:case 1073741917:S=K((1666189314==a.theTok?2E3:1E3)*this.floatParameter(++g));null!=b&&0>=S&&(S=-1);break;case 3:null!=q&&this.invArg();r=I=!0;m=(m+1)%2;n[m]=this.floatParameter(g);break;case 12291:269484114!=d&&this.invArg();d=12291;break;case 4114:var u=this.floatParameter(++g),T=this.paramAsStr(++g),O=
this.paramAsStr(++g);this.chk||(C=this.vwr.getFont3D(T,O,u));break;case 2:u=this.intParameter(g);if(I)r=!0,m=(m+1)%2,n[m]=u;else{t=this.vwr.getAtomIndexFromAtomNumber(u);if(!this.chk&&0>t)return;null!=E&&this.invArg();4<(l[0]=++k)&&a.bad();l[k]=t}break;case 1095761935:z=this.intParameter(++g);break;case 1048588:269484114!=d&&this.invArg();d=1048588;break;case 1048589:269484114!=d&&this.invArg();d=1048589;break;case 1073742114:r=I=!0;t=-1;break;case 1073741989:case 1073741990:s=Boolean.$valueOf(1073741989==
a.theTok);I=!0;G=1073741990==a.theTok;break;case 1649412120:0<=m&&this.invArg();q=a.encodeRadiusParameter(g,!1,!0);if(null==q)return;q.values=n;g=a.iToken;I=G=!0;s=Boolean.$valueOf(!1);1==M&&(M++,k++,u=JU.BSUtil.copy(y),JU.BSUtil.invertInPlace(u,this.vwr.getAtomCount()),u.and(this.vwr.ms.getAtomsWithinRadius(5,y,!1,null)),B.addLast(u));break;case 10:case 1048577:case 1048586:case 8:case 1048582:(10==a.theTok||1048577==a.theTok)&&M++;0<=t&&this.invArg();a.expressionResult=Boolean.FALSE;E=this.centerParameter(g);
if(V(a.expressionResult,JU.BS)&&(E=y=a.expressionResult,!this.chk&&0==y.length()))return;V(E,JU.P3)&&(k=new JU.Point3fi,k.setT(E),k.mi=z,E=k);4<(k=++x)&&a.bad();g=a.iToken;B.addLast(E);break;case 4:f=this.stringParameter(g);break;case 1073742164:F=a.tickParamAsStr(g,!1,!0,!0),g=a.iToken,d=1060866}(null!=q&&(0<=m||2!=k)||2>k&&null==b&&(null==F||1==k))&&a.bad();null!=f&&0!=f.indexOf(k+":")&&(f=k+":"+f);r&&n[1]<n[0]&&(n[1]=n[0],n[0]=3.4028235E38==n[1]?3.4028235E38:-200);if(!this.chk)if(null!=E||null!=
F)null==q&&(q=new J.atomdata.RadiusData(n,0,null,null)),null==E&&(F.id="default"),null!=E&&(null!=f&&269484114==d)&&(d=1060866),a=null,null!=C&&(a=J.api.Interface.getInterface("JM.Text",this.vwr,"script").newLabel(this.vwr,C,"",c,0,0,0,null)),null!=a&&(a.pymolOffset=e),this.setShapeProperty(6,"measure",this.vwr.newMeasurementData(b,B).set(d,null,q,f,null,F,v,G,s,I,S,c,a));else switch(a=null==b?l:b,d){case 12291:this.setShapeProperty(6,"delete",a);break;case 1048589:this.setShapeProperty(6,"show",
a);break;case 1048588:this.setShapeProperty(6,"hide",a);break;default:this.setShapeProperty(6,null==f?"toggle":"toggleOn",a),null!=f&&this.setShapeProperty(6,"setFormats",f)}});l(c$,"connect",function(a){var b=this.e,c=R(2,0),e=Array(2);e[0]=e[1]=this.vwr.bsA();var d=NaN,f=[-2147483648],h=0,g=131071,k=1073742026,x=!1,z=!1,t=!1,m=3.4028235E38,l=!1,n=0,I=0,v=new JU.BS,G=!1,r=0,q=0,s=0,C=!1;if(1==this.slen)this.chk||this.vwr.rebondState(b.$isStateScript);else{for(;a<this.slen;++a){switch(this.getToken(a).tok){case 1048589:case 1048588:this.checkLength(2);
this.chk||this.vwr.rebondState(b.$isStateScript);return;case 2:case 3:if(0<n){(z||l)&&b.error(23);g=JU.Edge.getBondOrderFromFloat(this.floatParameter(a));131071==g&&this.invArg();z=!0;break}2<++I&&b.bad();var B=this.floatParameter(a);269484210==this.tokAt(a+1)&&(B=-B/100,a++);c[h++]=B;break;case 10:case 1048577:(2<n||G&&0<n)&&b.bad();(z||l)&&this.invArg();e[n++]=this.atomExpressionAt(a);G=b.isBondSet;if(2==n){for(var B=b.iToken,y=a;y<B;y++)if(1073741824==this.tokAt(y)&&this.paramAsStr(y).equals("_1")){r=
a;break}b.iToken=B}a=b.iToken;break;case 1087373318:C=!0;break;case 1766856708:case 603979967:case 1073742074:l=!0;m=this.getColorTrans(b,a,!1,f);a=b.iToken;break;case 1074790662:f=1073741852==this.tokAt(2);this.checkLength(f?3:2);if(this.chk)return;this.vwr.clearModelDependentObjects();this.vwr.ms.deleteAllBonds();d=new JU.BS;this.vwr.ms.setPdbConectBonding(0,0,d);if(f){b=b.$isStateScript&&this.vwr.g.legacyAutoBonding;this.vwr.ms.autoBondBs4(null,null,d,null,this.vwr.getMadBond(),b);this.vwr.addStateScript(b?
"set legacyAutoBonding TRUE;connect PDB AUTO;set legacyAutoBonding FALSE;":"connect PDB auto;",!1,!0);return}this.vwr.addStateScript("connect PDB;",!1,!0);return;case 1073741830:case 1073741852:case 1073741904:case 1073742025:case 1073742026:t=!0;++a!=this.slen&&this.invArg();k=b.theTok;1073741852==k&&!(131071==g||2048==g||515==g)&&this.invArg();break;case 1708058:l||(f[0]=16777215,m=0.5,d=this.vwr.getFloat(570425406),l=!0),t||(k=1073742026),t=!0;case 1073741824:if(b.isColorParam(a)){q=-a;break}case 1076887572:case 1612189718:g=
this.paramAsStr(a);131071==(g=JS.ScriptParam.getBondOrderFromString(g))&&this.invArg();z&&b.error(18);z=!0;switch(g){case 33:switch(this.tokAt(a+1)){case 3:g=JS.ScriptParam.getPartialBondOrderFromFloatEncodedInt(this.st[++a].intValue);break;case 2:g=this.intParameter(++a)}break;case 2048:2==this.tokAt(a+1)&&(g=this.intParameter(++a)<<11,s=this.floatParameter(++a))}break;case 1666189314:d=this.floatParameter(++a);l=!0;break;case 1048587:case 12291:++a!=this.slen&&this.invArg();k=12291;x=!0;l=!1;break;
default:q=a}0<a&&(q==-a||q==a&&b.isColorParam(a)?(l=!0,f[0]=b.getArgbParam(a),a=b.iToken):q==a&&this.invArg())}if(!this.chk){2>h&&(0==h&&(c[0]=1E8),c[1]=c[0],c[0]=0.1);l&&(z||(g=65535),t||(k=1073742025));z=h=0;if(0<r){s=new JU.BS;b.definedAtomSets.put("_1",s);C=e[0];for(t=C.nextSetBit(0);0<=t;t=C.nextSetBit(t+1))s.set(t),e=this.vwr.makeConnections(c[0],c[1],g,k,s,this.atomExpressionAt(r),v,G,!1,0),h+=Math.abs(e[0]),z+=e[1],s.clear(t)}else e=this.vwr.makeConnections(c[0],c[1],g,k,e[0],e[1],v,G,C,s),
h+=Math.abs(e[0]),z+=e[1];c=b.doReport();x?c&&b.report(J.i18n.GT.i(J.i18n.GT._("{0} connections deleted"),z)):(l&&(this.vwr.selectBonds(v),Float.isNaN(d)||b.setShapeSizeBs(1,Math.round(2E3*d),null),this.finalizeObject(1,f[0],m,0,!1,null,0,v),this.vwr.selectBonds(null)),c&&b.report(J.i18n.GT.o(J.i18n.GT._("{0} new bonds; {1} modified"),[Integer.$valueOf(h),Integer.$valueOf(z)])))}}},"~N");l(c$,"console",function(){switch(this.getToken(1).tok){case 1048588:this.chk||this.vwr.showConsole(!1);break;case 1048589:this.chk||
this.vwr.showConsole(!0);break;case 1073741882:this.chk||this.vwr.sm.clearConsole();break;case 135270422:this.showString(this.stringParameter(2));break;default:this.invArg()}});l(c$,"contact",function(){var a=this.e;this.sm.loadShape(25);if(1073742001==this.tokAt(1)&&this.listIsosurface(25))return!1;var b=0;a.iToken=1;for(var c=null!=this.initIsosurface(25),e=c&&null==this.getShapeProperty(25,"ID"),d=null,f=null,h=null,g=null,k=null,x=!1,z=new JU.SB,t=2147483647,m=135266319,l=0,n=NaN,I=NaN,v=!0,G=
null,r=null,q=0,s=!1,C=-2147483648,B=1<a.iToken,y=a.iToken;y<this.slen;++y){switch(h=this.getToken(y).tok){default:B=!0;if(!a.setMeshDisplayProperty(25,0,a.theTok)){269484209!=a.theTok&&!JS.T.tokAttr(a.theTok,1073741824)&&this.invArg();this.setShapeId(25,y,c);y=a.iToken;break}0==b&&(b=y);y=a.iToken;continue;case 1074790550:B=!0;this.setShapeId(25,++y,c);e=null==this.getShapeProperty(25,"ID");y=a.iToken;break;case 1766856708:switch(this.tokAt(y+1)){case 1073741914:h=0;x=!0;z.append(" color density");
y++;break;case 1141899272:h=0,s=!0,z.append(" color type"),y++}if(0==h)break;case 603979967:case 1073742074:B=!0;0==q&&(q=y);a.setMeshDisplayProperty(25,y,a.theTok);y=a.iToken;break;case 554176565:B=!0;r=this.getCapSlabObject(y,!1);this.setShapeProperty(25,"slab",r);y=a.iToken;break;case 1073741914:x=!0;z.append(" density");this.isFloatParameter(y+1)&&(null==k&&(k=R(1,0)),k[0]=-Math.abs(this.floatParameter(++y)),z.append(" "+-k[0]));break;case 1073742122:c=this.floatParameter(++y);0<c&&(z.append(" resolution ").appendF(c),
this.setShapeProperty(25,"resolution",Float.$valueOf(c)));break;case 1095766030:case 1095761935:C=1095761935==a.theTok?this.intParameter(++y):a.modelNumberParameter(++y);z.append(" modelIndex "+C);break;case 135266325:case 1276118018:n=this.floatParameter(++y);z.append(" within ").appendF(n);break;case 269484193:case 2:case 3:g=a.encodeRadiusParameter(y,!1,!1);if(null==g)return!1;z.append(" ").appendO(g);y=a.iToken;break;case 1073741990:case 1073741989:G=1073741989==h?Boolean.TRUE:Boolean.FALSE;z.append(" ").appendO(a.theToken.value);
break;case 1073742020:t=this.intParameter(++y);break;case 1612189718:case 1073741881:case 1649412120:l=h;z.append(" ").appendO(a.theToken.value);break;case 1073742135:this.isFloatParameter(y+1)&&(I=this.floatParameter(++y));case 1074790451:case 1073742036:case 3145756:v=!1;case 1276117512:case 1073741961:case 135266319:case 4106:m=h;z.append(" ").appendO(a.theToken.value);1073742135==h&&z.append(" ").appendF(I);break;case 1073742083:k=a.floatParameterSet(++y,1,10);y=a.iToken;break;case 10:case 1048577:(e||
null!=f)&&this.invArg(),h=JU.BSUtil.copy(this.atomExpressionAt(y)),y=a.iToken,null==d?d=h:f=h,z.append(" ").append(JU.Escape.eBS(h))}c=12291!=a.theTok}!B&&null==d&&this.error(13);if(this.chk)return!1;if(null!=d){1649412120==l&&null==g&&(g=new J.atomdata.RadiusData(null,0,J.atomdata.RadiusData.EnumType.OFFSET,J.c.VDW.AUTO));y=null==g?new J.atomdata.RadiusData(null,0.26,J.atomdata.RadiusData.EnumType.OFFSET,J.c.VDW.AUTO):g;f=1073742036==m&&null==f&&null!=G&&G.booleanValue()?d:a.getMathExt().setContactBitSets(d,
f,v,n,y,!0);switch(m){case 1074790451:case 1073742135:y=a.lookupIdentifierValue("solvent");d.andNot(y);f.andNot(y);f.andNot(d);break;case 3145756:f.andNot(d);break;case 1073742036:2147483647==t&&(t=100),this.setShapeProperty(25,"minset",Integer.$valueOf(t)),z.append(" minSet ").appendI(t),null==k&&(k=[0.5,2])}null!=G&&(k=null==k?R(2,0):JU.AU.ensureLengthA(k,2),k[1]=G.booleanValue()?1:2);null!=k&&z.append(" parameters ").append(JU.Escape.eAF(k));this.setShapeProperty(25,"set",[Integer.$valueOf(l),
Integer.$valueOf(m),Boolean.$valueOf(x),Boolean.$valueOf(s),d,f,g,Float.$valueOf(I),k,Integer.$valueOf(C),z.toString()]);0<q&&a.setMeshDisplayProperty(25,q,0)}0<b&&(a.setMeshDisplayProperty(25,b,0)||this.invArg());null!=r&&null!=d&&this.setShapeProperty(25,"slab",r);if(null!=d&&(1073742036==m||v)){d=this.getShapeProperty(25,"volume");b=1073741961==m;if(JU.PT.isAD(d))for(y=a=0;y<d.length;y++)a+=b?d[y]:Math.abs(d[y]);else a=d.floatValue();a=Math.round(1E3*a)/1E3;if(x||1276117512!=m)x=this.getShapeProperty(25,
"nSets").intValue(),x="Contacts: "+(0>x?ua(-x/2):x),0!=a&&(x+=", with "+(b?"approx ":"net ")+"volume "+a+" A^3"),this.showString(x)}return!0});l(c$,"dipole",function(){var a=this.e,b=null,c=null,e=!1,d=!1,f=!1;this.sm.loadShape(17);if(1073742001==this.tokAt(1)&&this.listIsosurface(17))return!1;this.setShapeProperty(17,"init",null);if(1==this.slen)return this.setShapeProperty(17,"thisID",null),!1;for(var h=1;h<this.slen;++h){c=b=null;switch(this.getToken(h).tok){case 1048579:b="all";break;case 1048589:b=
"on";break;case 1048588:b="off";break;case 12291:b="delete";break;case 2:case 3:b="value";c=Float.$valueOf(this.floatParameter(h));break;case 10:10==this.tokAt(h+1)?this.setShapeProperty(17,"startSet",this.atomExpressionAt(h++)):b="atomBitset";case 1048577:null==b&&(b=e||d?"endSet":"startSet");c=this.atomExpressionAt(h);h=a.iToken;0==this.tokAt(h+1)&&"startSet"===b&&(b="atomBitset");e=!0;break;case 1048586:case 8:c=this.getPoint3f(h,!0);h=a.iToken;b=e||d?"endCoord":"startCoord";d=!0;break;case 1678770178:b=
"bonds";break;case 4102:b="calculate";if(10==this.tokAt(h+1)||1048577==this.tokAt(h+1))c=this.atomExpressionAt(++h),h=a.iToken;break;case 1074790550:this.setShapeId(17,++h,f);h=a.iToken;break;case 135267329:b="cross";c=Boolean.TRUE;break;case 1073742040:b="cross";c=Boolean.FALSE;break;case 1073742066:this.isFloatParameter(h+1)?(c=this.floatParameter(++h),2==a.theTok?(b="offsetPercent",c=Integer.$valueOf(K(c))):(b="offset",c=Float.$valueOf(c))):(b="offsetPt",c=this.centerParameter(++h),h=a.iToken);
break;case 1073742068:b="offsetSide";c=Float.$valueOf(this.floatParameter(++h));break;case 1073742188:b="value";c=Float.$valueOf(this.floatParameter(++h));break;case 1073742196:b="width";c=Float.$valueOf(this.floatParameter(++h));break;default:if(269484209==a.theTok||JS.T.tokAttr(a.theTok,1073741824)){this.setShapeId(17,h,f);h=a.iToken;break}this.invArg()}f=12291!=a.theTok&&4102!=a.theTok;null!=b&&this.setShapeProperty(17,b,c)}(d||e)&&this.setShapeProperty(17,"set",null);return!0});l(c$,"draw",function(){var a=
this.e;this.sm.loadShape(22);switch(this.tokAt(1)){case 1073742001:if(this.listIsosurface(22))return!1;break;case 1073742102:var b=2,a=1073742138==this.tokAt(b)?"":this.e.optParameterAsString(b);a.equals("chemicalShift")&&(a="cs");var c=1,e=0;0<a.length&&this.isFloatParameter(++b)&&(e=this.intParameter(b++));1073742138==this.tokAt(b)&&(c=this.floatParameter(++b));this.chk||this.e.runScript(this.vwr.getPointGroupAsString(!0,a,e,c));return!1;case 137363467:case 135270418:case 1052714:return this.plot(this.st),
!1}for(var d=!1,f=!1,h=!1,g=!1,k=!1,x=0,z=3.4028235E38,t=[-2147483648],m=0,l="",n=0,e=null,c=this.initIsosurface(22),I=(b=null!=c)&&null==this.getShapeProperty(22,"ID"),v=null,G=0,r=a.iToken;r<this.slen;++r){var q=null,s=null;switch(this.getToken(r).tok){case 1614417948:case 1679429641:if(this.chk)break;d=this.vwr.getPlaneIntersection(a.theTok,null,m/100,0);m=0;q="polygon";s=d;d=!0;break;case 4106:v=X(4,0);G=4;d=a.floatParameterSet(++r,4,4);r=a.iToken;for(b=0;4>b;b++)v[b]=K(d[b]);d=!0;break;case 1678770178:case 1141899265:if(null==
v||G>(1095761924==a.theTok?2:3))G=0,v=[-1,-1,-1,-1];v[G++]=this.atomExpressionAt(++r).nextSetBit(0);r=a.iToken;v[G++]=1678770178==a.theTok?this.atomExpressionAt(++r).nextSetBit(0):-1;r=a.iToken;d=!0;break;case 554176565:switch(this.getToken(++r).tok){case 1048582:q="slab";s=a.objectNameParameter(++r);r=a.iToken;d=!0;break;default:this.invArg()}break;case 135267842:switch(this.getToken(++r).tok){case 1614417948:case 1679429641:x=a.theTok;g=!0;continue;case 1048582:q="intersect";s=a.objectNameParameter(++r);
r=a.iToken;d=g=!0;break;default:this.invArg()}break;case 1073742106:var q="polygon",d=!0,s=new JU.Lst,C=0,B=0,y=null,E=null;if(a.isArrayParameter(++r))y=a.getPointArray(r,-1,!1),C=y.length;else{C=Math.max(0,this.intParameter(r));y=Array(C);for(b=0;b<C;b++)y[b]=this.centerParameter(++a.iToken)}switch(this.getToken(++a.iToken).tok){case 11:case 12:r=JS.SV.newT(a.theToken);r.toArray();E=r.getList();B=E.size();break;case 7:E=a.theToken.getList();B=E.size();break;default:B=Math.max(0,this.intParameter(a.iToken))}r=
JU.AU.newInt2(B);for(b=0;b<B;b++){var F=null==E?a.floatParameterSet(++a.iToken,3,4):JS.SV.flistValue(E.get(b),0);(3>F.length||4<F.length)&&this.invArg();r[b]=[K(F[0]),K(F[1]),K(F[2]),3==F.length?7:K(F[3])]}0<C?(s.addLast(y),s.addLast(r)):s=null;r=a.iToken;break;case 1297090050:f=null;h=0;g=null;switch(this.tokAt(++r)){case 4:f=this.stringParameter(r);break;case 12:f=JS.SV.sValue(this.getToken(r));break;default:a.isCenterParameter(r)||(h=this.intParameter(r++));a.isCenterParameter(r)&&(e=this.centerParameter(r));
a.isCenterParameter(a.iToken+1)&&(g=this.centerParameter(++a.iToken));if(this.chk)return!1;r=a.iToken}k=null;null==e&&r+1<this.slen&&(e=this.centerParameter(++r),k=10==this.tokAt(r)||1048577==this.tokAt(r)?this.atomExpressionAt(r):null);a.checkLast(a.iToken);this.chk||(e=this.vwr.getSymmetryInfoAtom(k,f,h,e,g,c,135176),this.showString(e.substring(0,e.indexOf("\n")+1)),a.runScript(0<e.length?e:'draw ID "sym_'+c+'*" delete'));return!1;case 4115:k=!0;continue;case 1048586:case 9:case 8:if(9==a.theTok||
!a.isPoint3f(r)){s=this.getPoint4f(r);if(k)return a.checkLast(a.iToken),this.chk||a.runScript(JU.Escape.drawQuat(JU.Quat.newP4(s),null==c?"frame":c," "+l,null==e?new JU.P3:e,m/100)),!1;q="planedef"}else s=e=this.getPoint3f(r,!0),q="coord";r=a.iToken;d=!0;break;case 135267841:case 135266319:if(!d&&!g&&0==x&&135267841!=a.theTok){q="plane";break}b=135266319==a.theTok?a.planeParameter(r):a.hklParameter(++r);r=a.iToken;if(0!=x){if(this.chk)break;d=this.vwr.getPlaneIntersection(x,b,m/100,0);m=0;q="polygon";
s=d}else s=b,q="planedef";d=!0;break;case 1073742E3:q="lineData";s=a.floatParameterSet(++r,0,2147483647);r=a.iToken;d=!0;break;case 10:case 1048577:q="atomSet";s=this.atomExpressionAt(r);k&&(e=this.centerParameter(r));r=a.iToken;d=!0;break;case 7:q="modelBasedPoints";s=JS.SV.strListValue(a.theToken);d=!0;break;case 1073742195:case 269484080:break;case 269484096:s=a.xypParameter(r);if(null!=s){r=a.iToken;q="coord";d=!0;break}h&&this.invArg();h=!0;break;case 269484097:h||this.invArg();h=!1;break;case 1141899269:q=
"reverse";break;case 4:s=this.stringParameter(r);q="title";break;case 135198:q="vector";break;case 1141899267:s=Float.$valueOf(this.floatParameter(++r));q="length";break;case 3:s=Float.$valueOf(this.floatParameter(r));q="length";break;case 1095761935:q="modelIndex";s=Integer.$valueOf(this.intParameter(++r));break;case 2:h?(q="modelIndex",s=Integer.$valueOf(this.intParameter(r))):m=this.intParameter(r);break;case 1073742138:++r>=this.slen&&this.error(34);switch(this.getToken(r).tok){case 2:m=this.intParameter(r);
continue;case 3:m=Math.round(100*this.floatParameter(r));continue}this.error(34);break;case 1074790550:c=this.setShapeId(22,++r,b);I=null==this.getShapeProperty(22,"ID");r=a.iToken;break;case 1073742027:q="fixed";s=Boolean.FALSE;break;case 1060869:q="fixed";s=Boolean.TRUE;break;case 1073742066:b=this.getPoint3f(++r,!0);r=a.iToken;q="offset";s=b;break;case 1073741906:q="crossed";break;case 1073742196:s=Float.$valueOf(this.floatParameter(++r));q="width";l=q+" "+s;break;case 1073741998:q="line";s=Boolean.TRUE;
break;case 1073741908:q="curve";break;case 1074790416:q="arc";break;case 1073741846:q="arrow";break;case 1073741880:q="circle";break;case 1073741912:q="cylinder";break;case 1073742194:q="vertices";break;case 1073742048:q="nohead";break;case 1073741861:q="isbarb";break;case 1073742130:q="rotate45";break;case 1073742092:q="perp";break;case 1666189314:case 1073741917:l=1666189314==a.theTok;F=this.floatParameter(++r);l&&(F*=2);s=Float.$valueOf(F);q=l||3==this.tokAt(r)?"width":"diameter";l=q+(3==this.tokAt(r)?
" "+F:" "+K(F));break;case 1048582:if(269484096==this.tokAt(r+2)||k){d=e=this.centerParameter(r);r=a.iToken;q="coord";s=d;d=!0;break}s=a.objectNameParameter(++r);q="identifier";d=!0;break;case 1766856708:case 603979967:case 1073742074:b=!0;z=this.getColorTrans(a,r,!1,t);r=a.iToken;continue;default:if(!a.setMeshDisplayProperty(22,0,a.theTok)){if(269484209==a.theTok||JS.T.tokAttr(a.theTok,1073741824)){c=this.setShapeId(22,r,b);r=a.iToken;break}this.invArg()}0==n&&(n=r);r=a.iToken;continue}b=12291!=
a.theTok;d&&(!f&&!k)&&(this.setShapeProperty(22,"points",Integer.$valueOf(m)),f=!0,m=0);d&&I&&this.invArg();null!=q&&this.setShapeProperty(22,q,s)}this.finalizeObject(22,t[0],z,m,d,v,n,null);return!0});l(c$,"data",function(){var a=this.e,b=null,c=null,e=!1,d;switch(a.iToken=this.slen){case 5:b=this.paramAsStr(2);case 4:case 2:c=this.paramAsStr(1);if(c.equalsIgnoreCase("clear")){this.chk||this.vwr.setData(null,null,0,0,0,0,0);return}if(0<=(d=c.indexOf("@")))b=""+a.getParameter(c.substring(d+1),4,!0),
c=c.substring(0,d).trim();else if(null==b&&0<=(d=c.indexOf(" ")))b=c.substring(d+1).trim(),c=c.substring(0,d).trim(),e=!0;break;default:a.bad()}d=c+" ";d=d.substring(0,d.indexOf(" ")).toLowerCase();if(d.equals("model")||d.equals("append"))a.cmdLoad();else if(!this.chk){var f=0<=c.toLowerCase().indexOf("(default)");if(d.equals("connect_atoms"))this.vwr.connect(this.parseDataArray(b,!1));else if(0==d.indexOf("ligand_"))this.vwr.setLigandModel(c.substring(7).toUpperCase()+"_data",b.trim());else if(0==
d.indexOf("file_"))this.vwr.setLigandModel(c.substring(5)+"_file",b.trim());else if(a=this.lastData=Array(4),d.equals("element_vdw")){a[0]=d;a[1]=b.$replace(";","\n");b=JU.Elements.elementNumberMax;d=X(b+1,0);for(f=1;f<=b;f++)d[f]=f;a[2]=d;a[3]=Integer.$valueOf(0);this.vwr.setData("element_vdw",a,b,0,0,0,0)}else if(0==d.indexOf("data2d_"))a[0]=c,a[1]=this.parseDataArray(b,!1),a[3]=Integer.$valueOf(2),this.vwr.setData(c,a,0,0,0,0,0);else if(0==d.indexOf("data3d_"))a[0]=c,a[1]=this.parseDataArray(b,
!0),a[3]=Integer.$valueOf(3),this.vwr.setData(c,a,0,0,0,0,0);else{var h=JU.PT.getTokens(c);if(0==d.indexOf("property_")&&!(2==h.length&&h[1].equals("set"))){f=this.vwr.bsA();a[0]=d;var g=e?0:this.vwr.getP("propertyAtomNumberField").intValue(),k=e?0:this.vwr.getP("propertyAtomNumberColumnCount").intValue(),x=e?-2147483648:this.vwr.getP("propertyDataField").intValue(),l=e?0:this.vwr.getP("propertyDataColumnCount").intValue();!e&&0<=c.indexOf(" ")&&(3==h.length&&(g=JU.PT.parseInt(h[1]),x=JU.PT.parseInt(h[2])),
5==h.length&&(g=JU.PT.parseInt(h[1]),k=JU.PT.parseInt(h[2]),x=JU.PT.parseInt(h[3]),l=JU.PT.parseInt(h[4])));0>g&&(g=0);0>x&&(x=0);c=this.vwr.getAtomCount();e=null;h=JU.BS.newN(c);if(0<g){for(var e=X(c+2,0),t=0;t<=c;t++)e[t]=-1;for(t=f.nextSetBit(0);0<=t;t=f.nextSetBit(t+1)){var m=this.vwr.getAtomNumber(t);m>c+1||(0>m||h.get(m))||(h.set(m),e[m]=t)}a[2]=e}else a[2]=JU.BSUtil.copy(f);a[1]=b;a[3]=Integer.$valueOf(0);this.vwr.setData(d,a,c,g,k,x,l)}else"occupany".equals(d)&&(d="occupancy"),g=JM.AtomCollection.getUserSettableType(d),
0<=g?this.vwr.setAtomData(g,d,b,f):(a[0]=c,a[1]=b,a[3]=Integer.$valueOf(0),this.vwr.setData(d,a,0,0,0,0,0))}}});l(c$,"ellipsoid",function(){var a=this.e,b=0,c=1,e=3.4028235E38,d=!1,f=!1;this.setShapeProperty(20,"thisID",null);switch(this.getToken(1).tok){case 1048589:b=2147483647;break;case 1048588:break;case 2:b=this.intParameter(1);break;case 1085443:this.sm.loadShape(20);this.setShapeProperty(20,"select",this.paramAsStr(2));c=a.iToken;f=d=!0;break;case 1074790550:case 269484209:case 1073741824:this.sm.loadShape(20);
1074790550==a.theTok&&c++;this.setShapeId(20,c,!1);c=a.iToken;d=!0;break;default:this.invArg()}if(d){for(b=[-2147483648];++c<this.slen;){var d=this.paramAsStr(c),h=null;this.getToken(c);if(!f)switch(a.theTok){case 1048582:d="points";h=Array(3);h[0]=a.objectNameParameter(++c);if(this.chk)continue;a.getShapePropertyData(24,"getVertices",h);break;case 1611272194:for(var h=Array(3),g=0;3>g;g++)h[g]=new JU.V3,h[g].setT(this.centerParameter(++c)),c=a.iToken;break;case 12289:h=this.centerParameter(++c);
c=a.iToken;break;case 1095761935:h=Integer.$valueOf(this.intParameter(++c));break;case 12291:h=Boolean.TRUE,this.checkLength(c+1)}if(null==h)switch(a.theTok){case 1048589:d="on";h=Boolean.TRUE;break;case 1048588:d="on";h=Boolean.FALSE;break;case 1073742138:h=Float.$valueOf(this.floatParameter(++c));break;case 10:case 1048577:d="atoms";h=this.atomExpressionAt(c);c=a.iToken;break;case 1766856708:case 603979967:case 1073742074:e=this.getColorTrans(a,c,!0,b);c=a.iToken;continue;case 1073742075:h=this.paramAsStr(++c)}null==
h&&this.invArg();this.setShapeProperty(20,d.toLowerCase(),h)}this.finalizeObject(20,b[0],e,0,!1,null,0,null);this.setShapeProperty(20,"thisID",null)}else a.setShapeSizeBs(20,b,null)});l(c$,"isosurface",function(a){var b=this.e;this.sm.loadShape(a);if(1073742001==this.tokAt(1)&&this.listIsosurface(a))return!1;var c=0,e=24==a,d=28==a,f=29==a,h=26==a,g=!1,k=!1,x=!1,l=!1,t=!1,m=!1,H=!1,n=!1,I=!1,v=!1,G=!1,r=!1,q=!1,s=!1,C=null,B=null,y=-2147483648,E,F,M,S,u,T=NaN,O=NaN,va=0,X=null,da=2147483647,N=null,
P=null,aa=null,p=new JU.SB,L,wa=null,Sa=null,na,ea=0,ba=null,Q=this.chk?0:-2147483648;b.setCursorWait(!0);var la=null!=this.initIsosurface(a),ua=la&&null==this.getShapeProperty(a,"ID"),kb=!1,Ta=!1,xa=null,Ua=null,fa=null,Va=null,ra=null,ya=null,D=new JU.Lst,lb=!1;(d||f)&&this.addShapeProperty(D,"fileType","Pmesh");for(var j=b.iToken;j<this.slen;++j){var A=null,w=null;this.getToken(j);1073741824==b.theTok&&(ba=this.paramAsStr(j));switch(b.theTok){case 603979870:X=1048589==this.getToken(++j).tok?Boolean.TRUE:
1048588==b.theTok?Boolean.FALSE:null;null==X&&this.invArg();continue;case 553648149:da=this.intParameter(++j);continue;case 4128:A="moveIsosurface";12!=this.tokAt(++j)&&this.invArg();w=this.getToken(j++).value;break;case 1297090050:for(var mb=this.floatArraySet(j+2,this.intParameter(j+1),16),ra=Array(mb.length),ga=ra.length;0<=--ga;)ra[ga]=JU.M4.newA16(mb[ga]);j=b.iToken;break;case 1089470478:0>Q&&(Q=Math.min(this.vwr.am.cmi,0));var nb=null==aa;null==P&&(P=JU.BSUtil.copy(this.vwr.bsA()));P.and(this.vwr.ms.getAtoms(1297090050,
Integer.$valueOf(1)));nb||P.andNot(aa);this.addShapeProperty(D,"select",P);nb&&(aa=JU.BSUtil.copy(P),JU.BSUtil.invertInPlace(aa,this.vwr.getAtomCount()),s=!0,this.addShapeProperty(D,"ignore",aa),p.append(" ignore ").append(JU.Escape.eBS(aa)));p.append(" symmetry");0==ea&&this.addShapeProperty(D,"colorRGB",Integer.$valueOf(1297090050));ra=this.vwr.ms.getSymMatrices(Q);break;case 1073742066:A="offset";w=this.centerParameter(++j);j=b.iToken;break;case 528432:A="rotate";w=1048587==this.tokAt(b.iToken=
++j)?null:this.getPoint4f(j);j=b.iToken;break;case 1610612740:A="scale3d";w=Float.$valueOf(this.floatParameter(++j));break;case 1073742090:p.append(" periodic");A="periodic";break;case 1073742078:case 266298:case 135266320:A=b.theToken.value.toString();p.append(" ").appendO(b.theToken.value);w=this.centerParameter(++j);p.append(" ").append(JU.Escape.eP(w));j=b.iToken;break;case 1679429641:if(0<=this.fullCommand.indexOf("# BBOX=")){var ob=JU.PT.split(JU.PT.getQuotedAttribute(this.fullCommand,"# BBOX"),
",");na=[JU.Escape.uP(ob[0]),JU.Escape.uP(ob[1])]}else b.isCenterParameter(j+1)?(na=[this.getPoint3f(j+1,!0),this.getPoint3f(b.iToken+1,!0)],j=b.iToken):na=this.vwr.ms.getBBoxVertices();p.append(" boundBox "+JU.Escape.eP(na[0])+" "+JU.Escape.eP(na[na.length-1]));A="boundingBox";w=na;break;case 135188:d=!0;p.append(" pmesh");A="fileType";w="Pmesh";break;case 135267842:P=this.atomExpressionAt(++j);this.chk?N=new JU.BS:1048577==this.tokAt(b.iToken+1)||10==this.tokAt(b.iToken+1)?(N=this.atomExpressionAt(++b.iToken),
N.and(this.vwr.ms.getAtomsWithinRadius(5,P,!1,null))):(N=this.vwr.ms.getAtomsWithinRadius(5,P,!0,null),N.andNot(this.vwr.ms.getAtoms(1095761936,P)));N.andNot(P);p.append(" intersection ").append(JU.Escape.eBS(P)).append(" ").append(JU.Escape.eBS(N));j=b.iToken;if(135368713==this.tokAt(j+1)){j++;var za=this.getToken(++j).value;p.append(" function ").append(JU.PT.esc(za));this.chk||this.addShapeProperty(D,"func",za.equals("a+b")||za.equals("a-b")?za:this.createFunction("__iso__","a,b",za))}else q=!0;
A="intersection";w=[P,N];break;case 1610625028:case 135266325:var Wa=1610625028==b.theTok;if(Wa){p.append(" display");var c=j,ia=this.tokAt(j+1);if(0==ia)continue;j++;this.addShapeProperty(D,"token",Integer.$valueOf(1048589));if(10==ia||1048579==ia){A="bsDisplay";1048579==ia?p.append(" all"):(w=this.st[j].value,p.append(" ").append(JU.Escape.eBS(w)));b.checkLast(j);break}else 135266325!=ia&&(b.iToken=j,this.invArg())}else va=j;var Ha,oa=null,N=null,Xa=!1;1048577==this.tokAt(j+1)?(Ha=this.floatParameter(j+
3),b.isPoint3f(j+4)?(oa=this.centerParameter(j+4),Xa=!0,b.iToken+=2):b.isPoint3f(j+5)?(oa=this.centerParameter(j+5),Xa=!0,b.iToken+=2):(N=b.atomExpression(this.st,j+5,this.slen,!0,!1,!1,!0),null==N&&this.invArg())):(Ha=this.floatParameter(++j),oa=this.centerParameter(++j));Wa&&b.checkLast(b.iToken);j=b.iToken;0<=this.fullCommand.indexOf("# WITHIN=")?N=JU.BS.unescape(JU.PT.getQuotedAttribute(this.fullCommand,"# WITHIN")):Xa||(N=V(b.expressionResult,JU.BS)?b.expressionResult:null);this.chk||(null!=
N&&0<=Q&&N.and(this.vwr.getModelUndeletedAtomsBitSet(Q)),null==oa&&(oa=null==N?new JU.P3:this.vwr.ms.getAtomSetCenter(N)),this.getWithinDistanceVector(D,Ha,oa,N,Wa),p.append(" within ").appendF(Ha).append(" ").append(null==N?JU.Escape.eP(oa):JU.Escape.eBS(N)));continue;case 1073742083:var A="parameters",pb=b.floatParameterSet(++j,1,10),j=b.iToken,w=pb;p.append(" parameters ").append(JU.Escape.eAF(pb));break;case 1716520985:case 1073742190:var xa=b.theToken.value,Oa=1073742190==b.theTok,Aa=this.tokAt(j+
1);null==Va?(!g&&(!x&&!k)&&(this.addShapeProperty(D,"sasurface",Float.$valueOf(0)),p.append(" vdw"),g=!0),A="property",null==X&&(X=JS.T.tokAttr(Aa,1112539136)&&1==this.vwr.getIsosurfacePropertySmoothing(!1)?Boolean.TRUE:Boolean.FALSE),this.addShapeProperty(D,"propertySmoothing",X),p.append(" isosurfacePropertySmoothing "+X),X===Boolean.TRUE&&(2147483647==da&&(da=this.vwr.getIsosurfacePropertySmoothing(!0)),this.addShapeProperty(D,"propertySmoothingPower",Integer.$valueOf(da)),p.append(" isosurfacePropertySmoothingPower "+
da)),this.vwr.g.rangeSelected&&this.addShapeProperty(D,"rangeSelected",Boolean.TRUE)):A=Va;ba=this.paramAsStr(j);p.append(" ").append(ba);if(0==ba.toLowerCase().indexOf("property_")){C=R(this.vwr.getAtomCount(),0);if(this.chk)continue;C=this.vwr.getDataFloat(ba);null==C&&this.invArg();this.addShapeProperty(D,A,C);continue}var Ba=this.vwr.getAtomCount(),C=R(Ba,0);if(Oa){var qb=this.paramAsStr(++j);0==qb.length?C=b.floatParameterSet(j,Ba,Ba):(C=R(Ba,0),this.chk||JU.Parser.parseStringInfestedFloatArray(""+
b.getParameter(qb,4,!0),null,C));this.chk||p.append(' "" ').append(JU.Escape.eAF(C))}else{this.getToken(++j);if(!this.chk){p.append(" "+b.theToken.value);var Pa=this.vwr.ms.at;this.vwr.autoCalculate(Aa);if(1766856708!=Aa){L=new JU.P3;for(var Ya=Ba;0<=--Ya;)C[Ya]=Pa[Ya].atomPropertyFloat(this.vwr,Aa,L)}}1766856708==Aa&&(fa="inherit");if(135266325==this.tokAt(j+1)){var rb=this.floatParameter(j+=2);p.append(" within "+rb);this.addShapeProperty(D,"propertyDistanceMax",Float.$valueOf(rb))}}w=C;break;case 1095761935:case 1095766030:g&&
this.invArg();Q=1095761935==b.theTok?this.intParameter(++j):b.modelNumberParameter(++j);p.append(" modelIndex "+Q);if(0>Q){A="fixed";w=Boolean.TRUE;break}A="modelIndex";w=Integer.$valueOf(Q);break;case 135280132:var A="select",Za=this.atomExpressionAt(++j),w=Za,j=b.iToken;1073742072==this.tokAt(j+1)&&(j++,aa=JU.BSUtil.copy(Za),JU.BSUtil.invertInPlace(aa,this.vwr.getAtomCount()),this.addShapeProperty(D,"ignore",aa),p.append(" ignore ").append(JU.Escape.eBS(aa)),s=!0);g||x?p.append(" select "+JU.Escape.eBS(Za)):
(P=w,0>Q&&0<=P.nextSetBit(0)&&(Q=this.vwr.getAtomModelIndex(P.nextSetBit(0))));break;case 1085443:y=this.intParameter(++j);break;case 12289:A="center";w=this.centerParameter(++j);p.append(" center "+JU.Escape.eP(w));j=b.iToken;break;case 1073742147:case 1766856708:var la=!0,$a=1073742147==b.theTok;if($a)p.append(" sign"),this.addShapeProperty(D,"sign",Boolean.TRUE);else{if(1073741914==this.tokAt(j+1)){j++;A="colorDensity";p.append(" color density");if(this.isFloatParameter(j+1)){var sb=this.floatParameter(++j);
p.append(" "+sb);w=Float.$valueOf(sb)}break}if(4==this.getToken(j+1).tok)fa=this.paramAsStr(++j),0<fa.indexOf(" ")&&(ya=JU.C.getColixArray(fa),null==ya&&this.error(4));else if(1073742018==b.theTok){j++;p.append(" color mesh");ea=b.getArgbParam(++j);this.addShapeProperty(D,"meshcolor",Integer.$valueOf(ea));p.append(" ").append(JU.Escape.escapeColor(ea));j=b.iToken;continue}if(603979967==(b.theTok=this.tokAt(j+1))||1073742074==b.theTok){p.append(" color");Ua=this.setColorOptions(p,j+1,24,-2);j=b.iToken;
continue}switch(this.tokAt(j+1)){case 1073741826:case 1073742114:this.getToken(++j);p.append(" color range");this.addShapeProperty(D,"rangeAll",null);if(1048579==this.tokAt(j+1)){j++;p.append(" all");continue}var tb=this.floatParameter(++j),ub=this.floatParameter(++j);this.addShapeProperty(D,"red",Float.$valueOf(tb));this.addShapeProperty(D,"blue",Float.$valueOf(ub));p.append(" ").appendF(tb).append(" ").appendF(ub);continue}if(b.isColorParam(j+1)&&(ea=b.getArgbParam(j+1),1074790746==this.tokAt(j+
2))){fa=b.getColorRange(j+1);j=b.iToken;break}p.append(" color")}b.isColorParam(j+1)?(ea=b.getArgbParam(++j),p.append(" ").append(JU.Escape.escapeColor(ea)),j=b.iToken,this.addShapeProperty(D,"colorRGB",Integer.$valueOf(ea)),la=!0,b.isColorParam(j+1)?(ea=b.getArgbParam(++j),j=b.iToken,this.addShapeProperty(D,"colorRGB",Integer.$valueOf(ea)),p.append(" ").append(JU.Escape.escapeColor(ea)),l=!0):$a&&this.invPO()):!$a&&null==ya&&this.invPO();continue;case 135270423:e||this.invArg();v=!this.chk;continue;
case 1229984263:4!=this.tokAt(j+1)&&this.invPO();continue;case 1112541194:case 1649412120:p.append(" ").appendO(b.theToken.value);var Ca=b.encodeRadiusParameter(j,!1,!0);if(null==Ca)return!1;p.append(" ").appendO(Ca);Float.isNaN(Ca.value)&&(Ca.value=100);w=Ca;A="radius";I=!0;x&&(g=!1);j=b.iToken;break;case 135266319:k=!0;A="plane";w=b.planeParameter(j);j=b.iToken;p.append(" plane ").append(JU.Escape.eP4(w));break;case 1073742138:A="scale";w=Float.$valueOf(this.floatParameter(++j));p.append(" scale ").appendO(w);
break;case 1048579:la&&this.invArg();A="thisID";break;case 1113198596:g=!0;++j;w=this.getPoint4f(j);A="ellipsoid";j=b.iToken;p.append(" ellipsoid ").append(JU.Escape.eP4(w));break;case 135267841:k=!0;A="plane";w=b.hklParameter(++j);j=b.iToken;p.append(" plane ").append(JU.Escape.eP4(w));break;case 135182:var g=!0,Ia=this.paramAsStr(++j);this.addShapeProperty(D,"lcaoType",Ia);p.append(" lcaocartoon ").append(JU.PT.esc(Ia));switch(this.getToken(++j).tok){case 10:case 1048577:A="lcaoCartoon";N=this.atomExpressionAt(j);
j=b.iToken;if(this.chk)continue;var Da=N.nextSetBit(0);0>Da&&this.error(14);p.append(" ({").appendI(Da).append("})");Q=this.vwr.getAtomModelIndex(Da);this.addShapeProperty(D,"modelIndex",Integer.$valueOf(Q));var ab=[new JU.V3,new JU.V3,JU.V3.newV(this.vwr.getAtomPoint3f(Da)),new JU.V3];if(!Ia.equalsIgnoreCase("s")&&null==this.vwr.getHybridizationAndAxes(Da,ab[0],ab[1],Ia))return!1;w=ab;break;default:this.error(14)}break;case 1183762:var Ea=2147483647,sa=2147483647,bb=269484192==this.tokAt(j+1);bb&&
j++;var Fa=null;switch(this.tokAt(++j)){case 0:b.bad();break;case 1073741914:p.append("mo [1] squared ");this.addShapeProperty(D,"squareLinear",Boolean.TRUE);Fa=[1];sa=Ea=0;j++;break;case 1073741973:case 1073742008:sa=this.moOffset(j);Ea=0;j=b.iToken;p.append(" mo "+(bb?"-":"")+"HOMO ");0<sa&&p.append("+");0!=sa&&p.appendI(sa);break;case 2:Ea=this.intParameter(j);p.append(" mo ").appendI(Ea);break;default:b.isArrayParameter(j)&&(Fa=b.floatParameterSet(j,1,2147483647),j=b.iToken)}if(1073742156==this.tokAt(j+
1))this.addShapeProperty(D,"squareLinear",Boolean.TRUE),p.append(" squared"),null==Fa&&(Fa=R(0,0));else if(135266320==this.tokAt(j+1)){++j;var vb=this.intParameter(++j),wb=2==this.tokAt(j+1)?this.intParameter(++j):-System.currentTimeMillis()%1E4;this.addShapeProperty(D,"monteCarloCount",Integer.$valueOf(vb));this.addShapeProperty(D,"randomSeed",Integer.$valueOf(wb));p.append(" points ").appendI(vb).appendC(" ").appendI(wb)}this.setMoData(D,Ea,Fa,sa,bb,Q,null);g=!0;continue;case 1073742036:A="nci";
p.append(" "+A);var ia=this.tokAt(j+1),xb=1229984263!=ia&&4!=ia&&1073742033!=ia,w=Boolean.$valueOf(xb);xb&&(g=!0);break;case 1073742016:case 1073742022:var yb=1073742016==b.theTok,A=yb?"mep":"mlp";p.append(" "+A);var Ja=null,cb=-1,g=!0;2==this.tokAt(j+1)&&(cb=this.intParameter(++j),p.append(" "+cb),this.addShapeProperty(D,"mepCalcType",Integer.$valueOf(cb)));if(4==this.tokAt(j+1))Ja=this.stringParameter(++j),p.append(" /*file*/"+JU.PT.esc(Ja));else if(1716520985==this.tokAt(j+1)){Va=A;continue}if(!this.chk)try{C=
null==Ja&&yb?this.vwr.getPartialCharges():this.getAtomicPotentials(P,aa,Ja)}catch(zb){if(!Z(zb,Exception))throw zb;}!this.chk&&null==C&&this.error(32);w=C;break;case 1313866249:H=!this.chk;p.append(" volume");break;case 1074790550:this.setShapeId(a,++j,la);ua=null==this.getShapeProperty(a,"ID");j=b.iToken;break;case 1073741888:603979967==this.tokAt(j+1)&&(kb=!0,j++);fa=this.paramAsStr(++j).toLowerCase();fa.equals("sets")?p.append(' colorScheme "sets"'):b.isColorParam(j)&&(fa=b.getColorRange(j),j=
b.iToken);break;case 1073741828:A="addHydrogens";w=Boolean.TRUE;p.append(" mp.addHydrogens");break;case 1073741836:A="angstroms";p.append(" angstroms");break;case 1073741837:A="anisotropy";w=this.getPoint3f(++j,!1);p.append(" anisotropy").append(JU.Escape.eP(w));j=b.iToken;break;case 1073741842:m=!this.chk;p.append(" area");break;case 1073741850:case 1073742076:g=!0;l&&!t&&(p.append(' phase "_orb"'),this.addShapeProperty(D,"phase","_orb"));var Y=R(7,0);Y[0]=this.intParameter(++j);Y[1]=this.intParameter(++j);
Y[2]=this.intParameter(++j);Y[3]=this.isFloatParameter(j+1)?this.floatParameter(++j):6;p.append(" atomicOrbital ").appendI(K(Y[0])).append(" ").appendI(K(Y[1])).append(" ").appendI(K(Y[2])).append(" ").appendF(Y[3]);135266320==this.tokAt(j+1)&&(j+=2,Y[4]=this.intParameter(j),Y[5]=3==this.tokAt(j+1)?this.floatParameter(++j):0,Y[6]=2==this.tokAt(j+1)?this.intParameter(++j):-System.currentTimeMillis()%1E4,p.append(" points ").appendI(K(Y[4])).appendC(" ").appendF(Y[5]).appendC(" ").appendI(K(Y[6])));
A="hydrogenOrbital";w=Y;break;case 1073741866:p.append(" binary");continue;case 1073741868:p.append(" blockData");A="blockData";w=Boolean.TRUE;break;case 1074790451:case 554176565:r=!0;A=b.theToken.value;w=this.getCapSlabObject(j,!1);j=b.iToken;break;case 1073741876:e||this.invArg();n=!0;if(this.chk)continue;var Ab=this.isFloatParameter(j+1)?this.floatParameter(++j):1.2,db=this.isFloatParameter(j+1)?this.floatParameter(++j):10;if(10<db)return b.integerOutOfRange(0,10),!1;p.append(" cavity ").appendF(Ab).append(" ").appendF(db);
this.addShapeProperty(D,"envelopeRadius",Float.$valueOf(db));this.addShapeProperty(D,"cavityRadius",Float.$valueOf(Ab));A="cavity";break;case 1073741896:case 1073741900:A="contour";p.append(" contour");switch(this.tokAt(j+1)){case 1073741920:w=b.floatParameterSet(j+2,1,2147483647);p.append(" discrete ").append(JU.Escape.eAF(w));j=b.iToken;break;case 1073741981:L=this.getPoint3f(j+2,!1);(0>=L.z||L.y<L.x)&&this.invArg();L.z==K(L.z)&&L.z>L.y-L.x&&(L.z=(L.y-L.x)/L.z);w=L;j=b.iToken;p.append(" increment ").append(JU.Escape.eP(L));
break;default:w=Integer.$valueOf(2==this.tokAt(j+1)?this.intParameter(++j):0),p.append(" ").appendO(w)}break;case 3:case 2:case 269484193:case 1073741910:p.append(" cutoff ");1073741910==b.theTok&&j++;269484193==this.tokAt(j)?(A="cutoffPositive",w=Float.$valueOf(O=this.floatParameter(++j)),p.append("+").appendO(w)):this.isFloatParameter(j)?(A="cutoff",w=Float.$valueOf(O=this.floatParameter(j)),p.appendO(w)):(A="cutoffRange",w=b.floatParameterSet(j,2,2),this.addShapeProperty(D,"cutoff",Float.$valueOf(0)),
p.append(JU.Escape.eAF(w)),j=b.iToken);break;case 1073741928:A="downsample";w=Integer.$valueOf(this.intParameter(++j));p.append(" downsample ").appendO(w);break;case 1073741930:A="eccentricity";w=this.getPoint4f(++j);p.append(" eccentricity ").append(JU.Escape.eP4(w));j=b.iToken;break;case 1074790508:p.append(" ed");this.setMoData(D,-1,null,0,!1,Q,null);g=!0;continue;case 536870916:case 1073742041:p.append(" ").appendO(b.theToken.value);A="debug";w=536870916==b.theTok?Boolean.TRUE:Boolean.FALSE;break;
case 1060869:p.append(" fixed");A="fixed";w=Boolean.TRUE;break;case 1073741962:p.append(" fullPlane");A="fullPlane";w=Boolean.TRUE;break;case 1073741966:case 1073741968:var Qa=1073741968==b.theTok,A=""+b.theToken.value,ja=new JU.Lst,w=ja,G=g=!0;p.append(" ").append(A);var $=this.paramAsStr(++j);if($.equals("=")){p.append(" =");$=this.paramAsStr(++j);p.append(" ").append(JU.PT.esc($));ja.addLast($);this.chk||this.addShapeProperty(D,"func",this.createFunction("__iso__","x,y,z",$));break}var eb=JU.PT.getQuotedAttribute(this.fullCommand,
"# DATA"+(G?"2":""));null==eb?eb="inline":$=eb;var Bb=0==$.indexOf("data2d_"),Ra=0==$.indexOf("data3d_"),Ta=$.equals("inline");p.append(" inline");ja.addLast($);var Cb=this.getPoint3f(++j,!1);p.append(" ").append(JU.Escape.eP(Cb));ja.addLast(Cb);var ka;S=++b.iToken;ja.addLast(ka=this.getPoint4f(S));p.append(" ").append(JU.Escape.eP4(ka));E=K(ka.x);u=++b.iToken;ja.addLast(ka=this.getPoint4f(u));p.append(" ").append(JU.Escape.eP4(ka));F=K(ka.x);ja.addLast(ka=this.getPoint4f(++b.iToken));p.append(" ").append(JU.Escape.eP4(ka));
M=K(ka.x);(0==E||0==F||0==M)&&this.invArg();if(!this.chk){var ca=null,ha=null;if(Qa){Ta?(E=Math.abs(E),F=Math.abs(F),M=Math.abs(M),ha=this.floatArraySetXYZ(++b.iToken,E,F,M)):ha=Ra?this.vwr.getDataFloat3D($):this.vwr.functionXYZ($,E,F,M);E=Math.abs(E);F=Math.abs(F);M=Math.abs(M);null==ha&&(b.iToken=S,b.errorStr(53,"xyzdata is null."));if(ha.length!=E||ha[0].length!=F||ha[0][0].length!=M)b.iToken=S,b.errorStr(53,"xyzdata["+ha.length+"]["+ha[0].length+"]["+ha[0][0].length+"] is not of size ["+E+"]["+
F+"]["+M+"]");ja.addLast(ha);p.append(" ").append(JU.Escape.e(ha))}else{Ta?(E=Math.abs(E),F=Math.abs(F),ca=this.floatArraySet(++b.iToken,E,F)):Bb?(ca=this.vwr.getDataFloat2D($),E=null==ca?0:ca.length,F=3):(ca=this.vwr.functionXY($,E,F),E=Math.abs(E),F=Math.abs(F));null==ca&&(b.iToken=S,b.errorStr(53,"fdata is null."));ca.length!=E&&!Bb&&(b.iToken=S,b.errorStr(53,"fdata length is not correct: "+ca.length+" "+E+"."));for(ga=0;ga<E;ga++)null==ca[ga]&&(b.iToken=u,b.errorStr(53,"fdata["+ga+"] is null.")),
ca[ga].length!=F&&(b.iToken=u,b.errorStr(53,"fdata["+ga+"] is not the right length: "+ca[ga].length+" "+F+"."));ja.addLast(ca);p.append(" ").append(JU.Escape.e(ca))}}j=b.iToken;break;case 1073741970:A="gridPoints";p.append(" gridPoints");break;case 1073741976:A="ignore";w=aa=this.atomExpressionAt(++j);p.append(" ignore ").append(JU.Escape.eBS(aa));j=b.iToken;break;case 1073741984:A="insideOut";p.append(" insideout");break;case 1073741988:case 1073741986:case 1073742100:p.append(" ").appendO(b.theToken.value);
A="pocket";w=1073742100==b.theTok?Boolean.TRUE:Boolean.FALSE;break;case 1073742002:A="lobe";w=this.getPoint4f(++j);j=b.iToken;p.append(" lobe ").append(JU.Escape.eP4(w));g=!0;break;case 1073742004:case 1073742006:A="lp";w=this.getPoint4f(++j);j=b.iToken;p.append(" lp ").append(JU.Escape.eP4(w));g=!0;break;case 1052700:(x||this.slen==j+1)&&this.invArg();x=!0;if((n||I||q)&&!g)g=!0,this.addShapeProperty(D,"bsSolvent",I||q?new JU.BS:b.lookupIdentifierValue("solvent")),this.addShapeProperty(D,"sasurface",
Float.$valueOf(0));0==p.length()?(wa=this.getShapeProperty(24,"plane"),null==wa?null!=this.getShapeProperty(24,"contours")&&this.addShapeProperty(D,"nocontour",null):(this.addShapeProperty(D,"plane",wa),p.append("plane ").append(JU.Escape.eP4(wa)),k=!0,wa=null)):!g&&!k&&this.invArg();p.append("; isosurface map");this.addShapeProperty(D,"map",g?Boolean.TRUE:Boolean.FALSE);break;case 1073742014:A="maxset";w=Integer.$valueOf(this.intParameter(++j));p.append(" maxSet ").appendO(w);break;case 1073742020:A=
"minset";w=Integer.$valueOf(this.intParameter(++j));p.append(" minSet ").appendO(w);break;case 1073742112:g=!0;A="rad";w=this.getPoint4f(++j);j=b.iToken;p.append(" radical ").append(JU.Escape.eP4(w));break;case 1073742027:A="fixed";w=Boolean.FALSE;p.append(" modelBased");break;case 1073742028:case 1073742135:case 1613758488:var xa=b.theToken.value,Ka;1073742028==b.theTok?(A="molecular",p.append(" molecular"),Ka=this.isFloatParameter(j+1)?this.floatParameter(++j):1.4):(this.addShapeProperty(D,"bsSolvent",
b.lookupIdentifierValue("solvent")),A=1073742135==b.theTok?"sasurface":"solvent",p.append(" ").appendO(b.theToken.value),Ka=this.isFloatParameter(j+1)?this.floatParameter(++j):this.vwr.getFloat(570425394));p.append(" ").appendF(Ka);w=Float.$valueOf(Ka);1073741961==this.tokAt(j+1)&&(this.addShapeProperty(D,"doFullMolecular",null),p.append(" full"),j++);g=!0;break;case 1073742033:this.addShapeProperty(D,"fileType","Mrc");p.append(" mrc");continue;case 1073742064:case 1073742062:this.addShapeProperty(D,
"fileType","Obj");p.append(" obj");continue;case 1073742034:this.addShapeProperty(D,"fileType","Msms");p.append(" msms");continue;case 1073742094:g&&this.invArg();A="phase";t=!0;w=4==this.tokAt(j+1)?this.stringParameter(++j):"_orb";p.append(" phase ").append(JU.PT.esc(w));break;case 1073742104:case 1073742122:A="resolution";w=Float.$valueOf(this.floatParameter(++j));p.append(" resolution ").appendO(w);break;case 1073742124:A="reverseColor";w=Boolean.TRUE;p.append(" reversecolor");break;case 1073742146:A=
"sigma";w=Float.$valueOf(T=this.floatParameter(++j));p.append(" sigma ").appendO(w);break;case 1113198597:A="geodesic";w=Float.$valueOf(this.floatParameter(++j));p.append(" geosurface ").appendO(w);g=!0;break;case 1073742154:A="sphere";w=Float.$valueOf(this.floatParameter(++j));p.append(" sphere ").appendO(w);g=!0;break;case 1073742156:A="squareData";w=Boolean.TRUE;p.append(" squared");break;case 1073741983:A=!g&&!k&&!x?"readFile":"mapColor";ba=this.stringParameter(++j);null==ba&&this.invArg();d&&
(ba=JU.PT.replaceWithCharacter(ba,"{,}|"," "));b.debugHigh&&JU.Logger.debug("pmesh inline data:\n"+ba);w=this.chk?null:ba;this.addShapeProperty(D,"fileName","");p.append(" INLINE ").append(JU.PT.esc(ba));g=!0;break;case 4:var La=!g&&!k,A=La&&!x?"readFile":"mapColor",W=this.paramAsStr(j);if(W.startsWith("=")&&1<W.length){var fb=this.vwr.setLoadFormat(W,"_",!1),W=fb[0],Db=!La||!Float.isNaN(O)?null:fb[1];if(null!=Db&&!this.chk){O=NaN;try{var Ma=this.vwr.getFileAsString3(Db,!1,null);JU.Logger.info(Ma);
Ma=JU.PT.split(Ma,"MAP_SIGMA_DENS")[1];O=JU.PT.parseFloat(Ma);this.showString("using cutoff = "+O)}catch(Eb){if(Z(Eb,Exception))JU.Logger.error("MAP_SIGMA_DENS -- could  not read "+fb[1]);else throw Eb;}0<O&&(Float.isNaN(T)||(O*=T,T=NaN,this.addShapeProperty(D,"sigma",Float.$valueOf(T))),this.addShapeProperty(D,"cutoff",Float.$valueOf(O)),p.append(" cutoff ").appendF(O))}0==va&&(xa="=xxxx",0>Q&&(Q=this.vwr.am.cmi),N=this.vwr.getModelUndeletedAtomsBitSet(Q),0<=N.nextSetBit(0)&&(this.getWithinDistanceVector(D,
2,null,N,!1),p.append(" within 2.0 ").append(JU.Escape.eBS(N))));La&&(lb=!0)}La&&(this.vwr.getP("_fileType").equals("Pdb")&&Float.isNaN(T)&&Float.isNaN(O))&&(this.addShapeProperty(D,"sigma",Float.$valueOf(-1)),p.append(" sigma -1.0"));0==W.length&&(0>Q&&(Q=this.vwr.am.cmi),W=b.getFullPathName(),w=this.vwr.getModelAuxiliaryInfoValue(Q,"jmolSurfaceInfo"));var gb=-1;null==w&&2==this.tokAt(j+1)&&this.addShapeProperty(D,"fileIndex",Integer.$valueOf(gb=this.intParameter(++j)));var Ga=4==this.tokAt(j+1)?
this.stringParameter(++j):null,g=!0;if(this.chk)break;var ta,ma=null;null==w&&(0<=this.fullCommand.indexOf("# FILE0=")?(W=JU.PT.getQuotedAttribute(this.fullCommand,"# FILE0"),1073741848==this.tokAt(j+1)&&(j+=2)):1073741848==this.tokAt(j+1)&&(ma=this.vwr.getFilePath(this.stringParameter(b.iToken=j+=2),!1),ta=this.vwr.getFullPathNameOrError(ma),ma=ta[0],""!==this.vwr.getPathForAllFiles()?(W=ma,ma=null):this.addShapeProperty(D,"localName",ma)));!W.startsWith("cache://")&&null==Ga&&(ta=this.vwr.getFullPathNameOrError(W),
W=ta[0],null!=ta[1]&&b.errorStr(17,W+":"+ta[1]));this.showString("reading isosurface data from "+W);null!=Ga&&(w=this.vwr.cacheGet(W),this.addShapeProperty(D,"calculationType",Ga));null==w&&(this.addShapeProperty(D,"fileName",W),null!=ma&&(W=ma),0<=gb&&p.append(" ").appendI(gb));p.append(" /*file*/").append(JU.PT.esc(W));null!=Ga&&p.append(" ").append(JU.PT.esc(Ga));break;case 4106:A="connections";switch(this.tokAt(++j)){case 10:case 1048577:w=[this.atomExpressionAt(j).nextSetBit(0)];break;default:w=
[K(b.floatParameterSet(j,1,1)[0])]}j=b.iToken;break;case 1095761923:A="atomIndex";w=Integer.$valueOf(this.intParameter(++j));break;case 1073741999:A="link";p.append(" link");break;case 1073741994:24!=a&&this.invArg();L=this.getPoint3f(b.iToken+1,!1);j=b.iToken;if(0>=L.x||0>=L.y||0>=L.z)break;L.x=K(L.x);L.y=K(L.y);L.z=K(L.z);p.append(" lattice ").append(JU.Escape.eP(L));x?(A="mapLattice",w=L):Sa=L;break;default:1073741824==b.theTok&&(A="thisID",w=ba);if(!b.setMeshDisplayProperty(a,0,b.theTok)){if(JS.T.tokAttr(b.theTok,
1073741824)&&!la){this.setShapeId(a,j,la);j=b.iToken;break}this.invArg()}0==c&&(c=j);j=this.slen-1}la=12291!=b.theTok;ua&&g&&this.invArg();null!=A&&this.addShapeProperty(D,A,w)}if(!this.chk){if((n||I)&&!g)g=!0,this.addShapeProperty(D,"bsSolvent",I?new JU.BS:b.lookupIdentifierValue("solvent")),this.addShapeProperty(D,"sasurface",Float.$valueOf(0));k&&(!g&&!x)&&(this.addShapeProperty(D,"nomap",Float.$valueOf(0)),g=!0);-1<=y&&this.addShapeProperty(D,"getSurfaceSets",Integer.$valueOf(y-1));if(null!=ya)this.addShapeProperty(D,
"colorDiscrete",ya);else if("sets".equals(fa))this.addShapeProperty(D,"setColorScheme",null);else if(null!=fa){var Na=this.vwr.cm.getColorEncoder(fa);null!=Na&&(Na.isTranslucent=kb,Na.hi=3.4028235E38,this.addShapeProperty(D,"remapColor",Na))}if(g&&!h&&0!=p.indexOf(";")){D.add(0,["newObject",null]);var Fb=null==P;Fb&&(P=JU.BSUtil.copy(this.vwr.bsA()));0>Q&&(Q=this.vwr.am.cmi);P.and(this.vwr.getModelUndeletedAtomsBitSet(Q));null!=xa&&(1<this.vwr.ms.getModelBS(P,!1).cardinality()&&b.errorStr(30,"ISOSURFACE "+
xa),Fb&&(D.add(0,["select",P]),0==p.indexOf("; isosurface map")&&(p=(new JU.SB).append("; isosurface map select ").append(JU.Escape.eBS(P)).append(p.substring(16)))))}q&&!r&&(g||this.addShapeProperty(D,"sasurface",Float.$valueOf(0)),x||(this.addShapeProperty(D,"map",Boolean.TRUE),this.addShapeProperty(D,"select",N),this.addShapeProperty(D,"sasurface",Float.$valueOf(0))),this.addShapeProperty(D,"slab",this.getCapSlabObject(-100,!1)));var Gb=g&&this.vwr.getBoolean(603979934);Gb&&JU.Logger.startTimer("isosurface");
this.setShapeProperty(a,"setProperties",D);Gb&&this.showString(JU.Logger.getTimerMsg("isosurface",0));lb&&(this.setShapeProperty(a,"token",Integer.$valueOf(1073742018)),this.setShapeProperty(a,"token",Integer.$valueOf(1073742046)),s=!0,p.append(" mesh nofill frontOnly"))}null!=Sa&&this.setShapeProperty(a,"lattice",Sa);null!=ra&&this.setShapeProperty(a,"symops",ra);s&&this.setShapeProperty(a,"token",Integer.$valueOf(1073741960));0<c&&(b.setMeshDisplayProperty(a,c,0)||this.invArg());if(this.chk)return!1;
var pa=null,qa=null;m&&(pa=this.getShapeProperty(a,"area"),V(pa,Float)?this.vwr.setFloatProperty("isosurfaceArea",pa.floatValue()):this.vwr.g.setUserVariable("isosurfaceArea",JS.SV.getVariableAD(pa)));H&&(qa=H?this.getShapeProperty(a,"volume"):null,V(qa,Float)?this.vwr.setFloatProperty("isosurfaceVolume",qa.floatValue()):this.vwr.g.setUserVariable("isosurfaceVolume",JS.SV.getVariableAD(qa)));if(!h){var U=null;if(x&&!g)this.setShapeProperty(a,"finalize",p.toString());else if(g&&(B=p.toString(),this.setShapeProperty(a,
"finalize",(0==B.indexOf("; isosurface map")?"":" select "+JU.Escape.eBS(P)+" ")+B),U=this.getShapeProperty(a,"ID"),null!=U&&!b.tQuiet)){O=this.getShapeProperty(a,"cutoff").floatValue();Float.isNaN(O)&&!Float.isNaN(T)&&JU.Logger.error("sigma not supported");U+=" created";e&&(U+=" with cutoff="+O);var hb=this.getShapeProperty(a,"minMaxInfo");3.4028235E38!=hb[0]&&(U+=" min="+hb[0]+" max="+hb[1]);U+="; "+JV.JC.shapeClassBases[a].toLowerCase()+" count: "+this.getShapeProperty(a,"count");U+=b.getIsosurfaceDataRange(a,
"\n")}var ib,jb;if(m||H)ib=m?"isosurfaceArea = "+(V(pa,Float)?""+pa:JU.Escape.eAD(pa)):null,jb=H?"isosurfaceVolume = "+(V(qa,Float)?""+qa:JU.Escape.eAD(qa)):null,null==U?(m&&this.showString(ib),H&&this.showString(jb)):(m&&(U+="\n"+ib),H&&(U+="\n"+jb));null!=U&&this.showString(U)}null!=Ua&&this.setShapeProperty(a,"translucency",Ua);this.setShapeProperty(a,"clear",null);v&&this.setShapeProperty(a,"cache",null);26!=a&&this.listIsosurface(a);return!0},"~N");l(c$,"lcaoCartoon",function(){var a=this.e;
this.sm.loadShape(26);if(1073742001==this.tokAt(1)&&this.listIsosurface(26))return!1;this.setShapeProperty(26,"init",this.fullCommand);if(1==this.slen)return this.setShapeProperty(26,"lcaoID",null),!1;for(var b=!1,c=null,c=1;c<this.slen;c++){var e=null,d=null;switch(this.getToken(c).tok){case 1074790451:case 554176565:e=a.theToken.value;1048588==this.tokAt(c+1)&&(a.iToken=c+1);d=this.getCapSlabObject(c,!0);c=a.iToken;break;case 12289:return this.isosurface(26),!1;case 528432:var f=d=0,h=0;switch(this.getToken(++c).tok){case 1112541205:d=
0.017453292*this.floatParameter(++c);break;case 1112541206:f=0.017453292*this.floatParameter(++c);break;case 1112541207:h=0.017453292*this.floatParameter(++c);break;default:this.invArg()}e="rotationAxis";d=JU.V3.new3(d,f,h);break;case 1048589:case 1610625028:case 3145768:e="on";break;case 1048588:case 12294:case 3145770:e="off";break;case 12291:e="delete";break;case 10:case 1048577:e="select";d=this.atomExpressionAt(c);c=a.iToken;break;case 1766856708:c=this.setColorOptions(null,c+1,26,-2);null!=
c&&this.setShapeProperty(26,"settranslucency",c);c=a.iToken;b=!0;continue;case 603979967:case 1073742074:a.setMeshDisplayProperty(26,c,a.theTok);c=a.iToken;b=!0;continue;case 1113200651:case 4:d=this.paramAsStr(c).toLowerCase();d.equals("spacefill")&&(d="cpk");e="create";a.optParameterAsString(c+1).equalsIgnoreCase("molecular")&&(c++,e="molecular");break;case 135280132:10==this.tokAt(c+1)||1048577==this.tokAt(c+1)?(e="select",d=this.atomExpressionAt(c+1),c=a.iToken):(e="selectType",d=this.paramAsStr(++c),
d.equals("spacefill")&&(d="cpk"));break;case 1073742138:e="scale";d=Float.$valueOf(this.floatParameter(++c));break;case 1073742004:case 1073742006:e="lonePair";break;case 1073742112:case 1073742111:e="radical";break;case 1073742028:e="molecular";break;case 1073741904:d=this.paramAsStr(++c);e="create";a.optParameterAsString(c+1).equalsIgnoreCase("molecular")&&(c++,e="molecular");break;case 1074790550:d=a.setShapeNameParameter(++c);c=a.iToken;b&&this.invArg();e="lcaoID";break;default:if(269484209==
a.theTok||JS.T.tokAttr(a.theTok,1073741824))269484209!=a.theTok&&(d=this.paramAsStr(c)),b&&this.invArg(),e="lcaoID"}12291!=a.theTok&&(b=!0);null==e&&this.invArg();this.setShapeProperty(26,e,d)}this.setShapeProperty(26,"clear",null);return!0});l(c$,"mapProperty",function(){for(var a,b,c,e,d,f=0,h=0,g=0;;){if(1114638363==this.tokAt(1))a=this.vwr.bsA(),b=this.atomExpressionAt(2),c=e="selected";else{a=this.atomExpressionAt(1);if(1048583!=this.tokAt(++this.e.iToken)||!JS.T.tokAttr(f=this.tokAt(++this.e.iToken),
1078984704))break;c=this.paramAsStr(this.e.iToken);b=this.atomExpressionAt(++this.e.iToken);if(1048583!=this.tokAt(++this.e.iToken)||!JS.T.tokAttr(h=this.tokAt(++this.e.iToken),2048))break;e=this.paramAsStr(this.e.iToken)}d=JS.T.tokAttr(g=this.tokAt(this.e.iToken+1),1078984704)?this.paramAsStr(++this.e.iToken):JS.T.nameOf(g=1095763969);this.e.checkLast(this.e.iToken);if(this.chk)return;var k=null;this.showString("mapping "+c.toUpperCase()+" for "+a.cardinality()+" atoms to "+e.toUpperCase()+" for "+
b.cardinality()+" atoms using "+d.toUpperCase());if(JS.T.tokAttrOr(f,1095761920,1112539136)&&JS.T.tokAttrOr(h,1095761920,1112539136)&&JS.T.tokAttrOr(g,1095761920,1112539136)){var x=this.e.getBitsetPropertyFloat(a,f|224,NaN,NaN),l=this.e.getBitsetPropertyFloat(a,g|224,NaN,NaN),f=this.e.getBitsetPropertyFloat(b,g|224,NaN,NaN),t=1716520985==h,m=R(t?this.vwr.getAtomCount():f.length,0),k=new JU.BS;if(x.length==l.length){for(var H=new java.util.Hashtable,g=0;g<x.length;g++)H.put(Float.$valueOf(l[g]),Float.$valueOf(x[g]));
x=-1;for(g=l=0;g<f.length;g++){var x=b.nextSetBit(x+1),n=H.get(Float.$valueOf(f[g]));null!=n&&(k.set(x),m[t?x:l]=n.floatValue(),l++)}t?this.vwr.setData(e,[e,m,k,Integer.$valueOf(1),Boolean.TRUE],this.vwr.getAtomCount(),0,0,2147483647,0):this.vwr.setAtomProperty(k,h,0,0,null,m,null)}}if(null==k){c=this.getBitsetIdent(a,"{"+d+"=%["+d+"]}."+e+" = %["+c+"]",null,!1,2147483647,!1);a=new JU.SB;for(g=0;g<c.length;g++)0>c[g].indexOf("null")&&a.append(c[g]).appendC("\n");JU.Logger.debugging&&JU.Logger.debug(a.toString());
c=JU.BSUtil.copy(this.vwr.getSelectionSubset());this.vwr.setSelectionSubset(b);try{this.e.runScript(a.toString())}catch(I){if(Z(I,Exception))b=I,this.vwr.setSelectionSubset(c),this.e.errorStr(-1,"Error: "+b.getMessage());else if(Z(I,Error))b=I,this.vwr.setSelectionSubset(c),this.e.errorStr(-1,"Error: "+b.toString());else throw I;}this.vwr.setSelectionSubset(c)}this.showString("DONE");return}this.invArg()});l(c$,"minimize",function(){for(var a=null,b=2147483647,c=0,e=!1,d=!1,f=null,h=!1,g=this.vwr.getMinimizer(!1),
k=1;k<this.slen;k++)switch(this.getToken(k).tok){case 1073741828:e=!0;continue;case 1073741874:case 1073742162:this.checkLength(2);if(this.chk||null==g)return;g.setProperty(this.paramAsStr(k),null);return;case 1073741882:this.checkLength(2);if(this.chk||null==g)return;g.setProperty("clear",null);return;case 1073741894:1!=k&&this.invArg();b=a=0;c=X(5,0);if(1073741882==this.tokAt(++k))this.checkLength(3);else{for(;4>a&&!this.isFloatParameter(k);)c[++a]=this.atomExpressionAt(k).nextSetBit(0),k=this.e.iToken+
1;c[0]=a;1==a&&this.invArg();b=this.floatParameter(this.e.checkLast(k))}this.chk||this.vwr.getMinimizer(!0).setProperty("constraint",[c,X(a,0),Float.$valueOf(b)]);return;case 1073741905:c=this.floatParameter(++k);continue;case 1073741934:b=0;continue;case 1060869:1!=k&&this.invArg();f=this.atomExpressionAt(++k);0>f.nextSetBit(0)&&(f=null);k=this.e.iToken;this.chk||this.vwr.getMinimizer(!0).setProperty("fixed",f);if(k+1==this.slen)return;continue;case 10:case 1048577:h=!0;case 135280132:135280132==
this.e.theTok&&k++;a=this.atomExpressionAt(k);k=this.e.iToken;1073742072==this.tokAt(k+1)&&(k++,h=!0);continue;case 1073742148:d=!0;break;case 266298:b=this.intParameter(++k);continue;default:this.invArg()}if(!this.chk)try{this.vwr.minimize(this.e,b,c,a,f,0,e,h,d,!1)}catch(x){if(Z(x,Exception))throw new JS.ScriptInterruption(this.e,"minimize",1);throw x;}});l(c$,"mo",function(a){var b=this.e,c=2147483647,e=!1,d=this.vwr.getVisibleFramesBitSet(),f=new JU.Lst,h=1;if(1095766030==this.tokAt(1)||4115==
this.tokAt(1))h=b.modelNumberParameter(2),0>h&&this.invArg(),d.clearAll(),d.set(h),h=3;for(var g=d.nextSetBit(0);0<=g;g=d.nextSetBit(g+1)){this.sm.loadShape(27);var k=h;if(1073742001==this.tokAt(k)&&this.listIsosurface(27))break;this.setShapeProperty(27,"init",Integer.$valueOf(g));var x=null,l=this.getShapeProperty(27,"moNumber").intValue(),t=this.getShapeProperty(27,"moLinearCombination");if(a)break;0==l&&(l=2147483647);var m=null,H=null;switch(this.getToken(k).tok){case 1074790451:case 554176565:m=
b.theToken.value;H=this.getCapSlabObject(k,!1);break;case 1073741914:m="squareLinear";H=Boolean.TRUE;t=[1];c=l=0;break;case 2:l=this.intParameter(k);t=this.moCombo(f);null==t&&0>l&&(t=[-100,-l]);break;case 269484192:switch(this.tokAt(++k)){case 1073741973:case 1073742008:break;default:this.invArg()}e=!0;case 1073741973:case 1073742008:2147483647==(c=this.moOffset(k))&&this.invArg();l=0;t=this.moCombo(f);break;case 1073742037:l=1073742037;t=this.moCombo(f);break;case 1073742108:l=1073742108;t=this.moCombo(f);
break;case 1766856708:this.setColorOptions(null,k+1,27,2);break;case 135266319:m="plane";H=b.planeParameter(k);break;case 135266320:this.addShapeProperty(f,"randomSeed",2==this.tokAt(k+2)?Integer.$valueOf(this.intParameter(k+2)):null);m="monteCarloCount";H=Integer.$valueOf(this.intParameter(k+1));break;case 1073742138:m="scale";H=Float.$valueOf(this.floatParameter(k+1));break;case 1073741910:269484193==this.tokAt(k+1)?(m="cutoffPositive",H=Float.$valueOf(this.floatParameter(k+2))):(m="cutoff",H=Float.$valueOf(this.floatParameter(k+
1)));break;case 536870916:m="debug";break;case 1073742054:m="plane";break;case 1073742104:case 1073742122:m="resolution";H=Float.$valueOf(this.floatParameter(k+1));break;case 1073742156:m="squareData";H=Boolean.TRUE;break;case 1073742168:k+1<this.slen&&4==this.tokAt(k+1)&&(m="titleFormat",H=this.paramAsStr(k+1));break;case 1073741824:this.invArg();break;default:if(b.isArrayParameter(k)){t=b.floatParameterSet(k,1,2147483647);1073742156==this.tokAt(b.iToken+1)&&(this.addShapeProperty(f,"squareLinear",
Boolean.TRUE),b.iToken++);break}a=b.iToken;b.setMeshDisplayProperty(27,0,b.theTok)||this.invArg();this.setShapeProperty(27,"setProperties",f);b.setMeshDisplayProperty(27,a,this.tokAt(a));return!0}null!=m&&this.addShapeProperty(f,m,H);if(2147483647!=l||null!=t)4==this.tokAt(b.iToken+1)&&(x=this.paramAsStr(++b.iToken)),b.setCursorWait(!0),this.setMoData(f,l,t,c,e,g,x),this.addShapeProperty(f,"finalize",null);0<f.size()&&this.setShapeProperty(27,"setProperties",f);f.clear()}return!0},"~B");l(c$,"modulation",
function(){var a=null,b=!0,c=!1,e=null;switch(this.getToken(1).tok){case 1048588:b=!1;case 0:case 1048589:break;case 10:case 1048577:e=this.atomExpressionAt(1);switch(this.tokAt(this.e.iToken+1)){case 1048588:b=!1;case 1048589:this.e.iToken++}this.e.checkLast(this.e.iToken);break;case 1048586:case 8:a=this.e.getPoint3f(1,!1);c=1048589==this.tokAt(this.e.iToken+1);break;case 3:a=this.floatParameter(1);a=JU.P3.new3(a,a,a);break;case 2:c=this.intParameter(1);a=JU.P3.new3(c,c,c);c=!0;break;case 1073742138:b=
this.floatParameter(2);this.chk||this.vwr.setFloatProperty("modulationScale",b);return;default:this.invArg()}this.chk||(this.vwr.setVibrationOff(),this.vwr.setModulation(e,b,a,c))});l(c$,"navigate",function(){var a=this.e;if(1==this.slen)a.setBooleanProperty("navigationMode",!0);else{var b=JU.V3.new3(0,1,0),c=new JU.Lst,e;if(2==this.slen)switch(this.getToken(1).tok){case 1048589:case 1048588:if(this.chk)return;a.setObjectMad(33,"axes",1);this.setShapeProperty(33,"position",JU.P3.new3(50,50,3.4028235E38));
a.setBooleanProperty("navigationMode",!0);this.vwr.tm.setNavOn(1048589==a.theTok);return;case 1073742162:this.chk||this.vwr.tm.setNavXYZ(0,0,0);return;case 8:case 1113200654:break;default:this.invArg()}!this.chk&&!this.vwr.getBoolean(603979887)&&a.setBooleanProperty("navigationMode",!0);for(var d=1;d<this.slen;d++){var f=this.isFloatParameter(d)?this.floatParameter(d++):2;0>f&&this.invArg();!this.chk&&0<f&&a.refresh(!1);switch(this.getToken(d).tok){case 8:case 1048586:e=this.getPoint3f(d,!0);a.iToken++;
a.iToken!=this.slen&&this.invArg();this.chk||this.vwr.tm.setNavXYZ(e.x,e.y,e.z);return;case 554176526:e=this.floatParameter(++d);this.chk||c.addLast([Integer.$valueOf(554176526),Float.$valueOf(f),Float.$valueOf(e)]);continue;case 12289:e=this.centerParameter(++d);d=a.iToken;this.chk||c.addLast([Integer.$valueOf(135266320),Float.$valueOf(f),e]);continue;case 528432:switch(this.getToken(++d).tok){case 1112541205:b.set(1,0,0);d++;break;case 1112541206:b.set(0,1,0);d++;break;case 1112541207:b.set(0,0,
1);d++;break;case 8:case 1048586:b.setT(this.getPoint3f(d,!0));d=a.iToken+1;break;case 1073741824:this.invArg()}e=this.floatParameter(d);this.chk||c.addLast([Integer.$valueOf(528432),Float.$valueOf(f),b,Float.$valueOf(e)]);continue;case 4160:var h=e=NaN;if(this.isFloatParameter(++d))e=this.floatParameter(d),h=this.floatParameter(++d);else switch(this.tokAt(d)){case 1112541205:e=this.floatParameter(++d);break;case 1112541206:h=this.floatParameter(++d);break;default:e=this.centerParameter(d);d=a.iToken;
this.chk||c.addLast([Integer.$valueOf(4160),Float.$valueOf(f),e]);continue}this.chk||c.addLast([Integer.$valueOf(269484210),Float.$valueOf(f),Float.$valueOf(e),Float.$valueOf(h)]);continue;case 269484208:continue;case 1113200654:e=new JU.Lst;10==this.tokAt(d+1)||1048577==this.tokAt(d+1)?(h=this.atomExpressionAt(++d),d=a.iToken):h=this.vwr.bsA();if(this.chk)return;this.vwr.getPolymerPointsAndVectors(h,e);var g;if(0<(g=e.size())){for(var h=Array(g),k=0;k<g;k++)h[k]=e.get(k);c.addLast([Integer.$valueOf(1113200654),
Float.$valueOf(f),h]);continue}break;case 1073742084:if(1048582==this.getToken(d+1).tok){d++;e=a.objectNameParameter(++d);if(this.chk)return;this.setShapeProperty(22,"thisID",e);e=this.getShapeProperty(22,"vertices");a.refresh(!1);null==e&&this.invArg();h=K(this.isFloatParameter(d+1)?this.floatParameter(++d):0);g=K(this.isFloatParameter(d+1)?this.floatParameter(++d):2147483647);c.addLast([Integer.$valueOf(1073742084),Float.$valueOf(f),e,null,[h,g]]);continue}for(e=new JU.Lst;a.isCenterParameter(d+
1);)e.addLast(this.centerParameter(++d)),d=a.iToken;if(0<e.size()){e=e.toArray(Array(e.size()));this.chk||c.addLast([Integer.$valueOf(1073742084),Float.$valueOf(f),e,null,[0,2147483647]]);continue}default:this.invArg()}}!this.chk&&!this.vwr.isJmolDataFrame()&&this.vwr.tm.navigateList(a,c)}});da(c$,"plot",function(a){this.st=this.e.st;this.chk=this.e.chk;var b=this.vwr.am.cmi;0>b&&this.e.errorStr(30,"plot");var b=this.vwr.ms.getJmolDataSourceFrame(b),c=a.length-1,e=a!==this.st,d=!0,f=this.st;e&&(this.e.st=
this.st=a);var h=e?135270926:a[0].tok,g=e||135270418==h||1052714==h?0:1,k=null,l=!0,z=!1;switch(h){case 135176:l=!1;z=!0;break;case 135270926:d=l=!1;break;case 135270422:l=!1,4==JS.CmdExt.tokAtArray(c,a)?k=this.stringParameter(c--):1048583==JS.CmdExt.tokAtArray(c-1,a)?(k=this.paramAsStr(c-2)+"."+this.paramAsStr(c),c-=3):(this.e.st=this.st=f,this.e.iToken=this.st.length,this.error(13))}var e="",t=null,m="",H=!1,n=!1,I=!1,v=!1,G=0,r=0,q=0,s=JU.BSUtil.copy(this.vwr.bsA()),C="; select "+JU.Escape.eBS(s)+
";\n ",v=this.e.optParameterAsString(c).toLowerCase(),B=null,y=null,E=null,F=JS.CmdExt.tokAtArray(g,a);4==F&&(F=JS.T.getTokFromName(a[g].value));switch(F){default:this.e.iToken=1;this.invArg();break;case 135270408:this.e.iToken=1;v="data";C="";break;case 1716520985:this.e.iToken=g+1;G=this.plotProp();0==G&&this.invArg();r=this.plotProp();q=this.plotProp();1288701959==this.tokAt(this.e.iToken)&&(E=this.stringParameter(++this.e.iToken),d=!1,this.e.iToken++);32==this.tokAt(this.e.iToken)&&(B=this.getPoint3f(++this.e.iToken,
!1),this.e.iToken++);64==this.tokAt(this.e.iToken)&&(y=this.getPoint3f(++this.e.iToken,!1),this.e.iToken++);v="property "+JS.T.nameOf(G)+(0==r?"":" "+JS.T.nameOf(r))+(0==q?"":" "+JS.T.nameOf(q));0>s.nextSetBit(0)&&(s=this.vwr.getModelUndeletedAtomsBitSet(b));m="select "+JU.Escape.eBS(s)+";\n ";break;case 1052714:v.equalsIgnoreCase("draw")&&(v=this.e.optParameterAsString(--c).toLowerCase());v=c>g&&v.startsWith("r");v="ramachandran"+(v?" r":"")+(135176==h?" draw":"");break;case 135270418:case 137363467:e=
' "'+this.vwr.getQuaternionFrame()+'"';m="set quaternionFrame"+e+";\n  ";H=!0;v.equalsIgnoreCase("draw")&&(z=!0,v=this.e.optParameterAsString(--c).toLowerCase());I=(n=v.startsWith("deriv")||v.startsWith("diff"))&&0<v.indexOf("2");n&&c--;if(v.equalsIgnoreCase("helix")||v.equalsIgnoreCase("axis"))n=z=!0,c=-1;v=((c<=g?"":this.e.optParameterAsString(c))+"w").substring(0,1);if(v.equals("a")||v.equals("r"))n=!0;JU.PT.isOneOf(v,";w;x;y;z;r;a;")||this.e.evalError("QUATERNION [w,x,y,z,a,r] [difference][2]",
null);v="quaternion "+v+(n?" difference":"")+(I?"2":"")+(z?" draw":"")}this.st=f;if(this.chk)return"";if(l&&(m+="plot "+v,a=this.vwr.ms.getJmolDataFrameIndex(b,m),0<a&&135270422!=h&&135270926!=h))return this.vwr.setCurrentModelIndexClear(a,!0),"";f=c=a=null;if(1716520985==F){a=this.e.getBitsetPropertyFloat(s,G|224,null==B?NaN:B.x,null==y?NaN:y.x);0!=r&&(c=this.e.getBitsetPropertyFloat(s,r|224,null==B?NaN:B.y,null==y?NaN:y.y));0!=q&&(f=this.e.getBitsetPropertyFloat(s,q|224,null==B?NaN:B.z,null==y?
NaN:y.z));null==B&&(B=JU.P3.new3(this.getPlotMinMax(a,!1,G),this.getPlotMinMax(c,!1,r),this.getPlotMinMax(f,!1,q)));null==y&&(y=JU.P3.new3(this.getPlotMinMax(a,!0,G),this.getPlotMinMax(c,!0,r),this.getPlotMinMax(f,!0,q)));JU.Logger.info("plot min/max: "+B+" "+y);g=t=null;if(d){g=JU.P3.new3(1,1,1);t=new JU.P3;t.ave(y,B);g.sub2(y,B);g.set(g.x/200,g.y/200,g.z/200);JS.T.tokAttr(G,1095761920)?(g.x=1,t.x=0):0.1<g.x&&10>=g.x&&(g.x=1);JS.T.tokAttr(r,1095761920)?(g.y=1,t.y=0):0.1<g.y&&10>=g.y&&(g.y=1);JS.T.tokAttr(q,
1095761920)?(g.z=1,t.z=0):0.1<g.z&&10>=g.z&&(g.z=1);if(0==q||0==r)t.z=B.z=y.z=g.z=0;for(d=0;d<a.length;d++)a[d]=(a[d]-t.x)/g.x;if(0!=r)for(d=0;d<c.length;d++)c[d]=(c[d]-t.y)/g.y;if(0!=q)for(d=0;d<f.length;d++)f[d]=(f[d]-t.z)/g.z}t=[s,a,c,f,B,y,g,t,E]}if(135270422==h)return this.vwr.writeFileData(k,"PLOT_"+v,b,t);d=v.equals("data")?"1 0 H 0 0 0 # Jmol PDB-encoded data":this.vwr.getPdbData(b,v,null,t,null,!0);if(135270926==h)return d;JU.Logger.debugging&&JU.Logger.debug(d);if(135176==h)return this.e.runScript(d),
"";h=this.vwr.getFileInfo();k=this.vwr.getBoolean(603979792);this.vwr.g.appendNew=!0;d=null!=d&&null==this.vwr.openStringInlineParamsAppend(d,null,!0);this.vwr.g.appendNew=k;this.vwr.setFileInfo(h);if(!d)return"";h=this.vwr.getModelCount();this.vwr.ms.setJmolDataFrame(m,b,h-1);1716520985!=F&&(m+=";\n"+C);m=this.vwr.addStateScript(m,!0,!1);d=150;switch(F){default:b="frame 0.0; frame last; reset;select visible;wireframe only;";d=10;break;case 1716520985:this.vwr.setFrameTitle(h-1,v+" plot for model "+
this.vwr.getModelNumberDotted(b));b="frame 0.0; frame last; reset;select visible; spacefill 3; wireframe 0;draw plotAxisX"+h+' {100 -100 -100} {-100 -100 -100} "'+JS.T.nameOf(G)+'";draw plotAxisY'+h+' {-100 100 -100} {-100 -100 -100} "'+JS.T.nameOf(r)+'";';0!=q&&(b+="draw plotAxisZ"+h+' {-100 -100 100} {-100 -100 -100} "'+JS.T.nameOf(q)+'";');break;case 1052714:this.vwr.setFrameTitle(h-1,"ramachandran plot for model "+this.vwr.getModelNumberDotted(b));b="frame 0.0; frame last; reset;select visible; color structure; spacefill 3.0; wireframe 0;draw ramaAxisX"+
h+' {100 0 0} {-100 0 0} "phi";draw ramaAxisY'+h+' {0 100 0} {0 -100 0} "psi";';break;case 135270418:case 137363467:this.vwr.setFrameTitle(h-1,v.$replace("w"," ")+e+" for model "+this.vwr.getModelNumberDotted(b)),b=JU.C.getHexCode(this.vwr.getColixBackgroundContrast()),b="frame 0.0; frame last; reset;select visible; wireframe 0; spacefill 3.0; isosurface quatSphere"+h+" color "+b+" sphere 100.0 mesh nofill frontonly translucent 0.8;draw quatAxis"+h+'X {100 0 0} {-100 0 0} color red "x";draw quatAxis'+
h+'Y {0 100 0} {0 -100 0} color green "y";draw quatAxis'+h+'Z {0 0 100} {0 0 -100} color blue "z";color structure;draw quatCenter'+h+"{0 0 0} scale 0.02;"}this.e.runScript(b+C);m.setModelIndex(this.vwr.am.cmi);this.vwr.setRotationRadius(d,!0);this.sm.loadShape(30);this.showString("frame "+this.vwr.getModelNumberDotted(h-1)+(0<v.length?" created: "+v+(H?e:""):""));return""},"~A");l(c$,"plotProp",function(){var a=0;switch(this.tokAt(this.e.iToken)){case 1288701959:case 32:case 64:break;default:JS.T.tokAttr(a=
this.tokAt(this.e.iToken),1078984704)&&this.e.iToken++}return a});l(c$,"polyhedra",function(){var a=this.e,b=!1,c=!1,e=!1,d=!1,f=!1,h=0,g=0;this.sm.loadShape(21);this.setShapeProperty(21,"init",Boolean.TRUE);for(var k="centers",l="radius_",z=3.4028235E38,t=[-2147483648],m=1;m<this.slen;++m){var H=null,n=null;switch(this.getToken(m).tok){case 12291:case 1048589:case 1048588:(m+1!=this.slen||b||1<g||0==g&&"to".equals(k))&&this.error(18);H=1048588==a.theTok?"off":1048589==a.theTok?"on":"delete";c=!0;
break;case 269484436:case 269484080:continue;case 1678770178:0<g&&this.invPO();b=!0;H="bonds";break;case 1666189314:l="radius";continue;case 2:case 3:0<g&&!f&&this.invPO();if(2==a.theTok&&"radius_"===l){H="nVertices";n=Integer.$valueOf(this.intParameter(m));b=!0;break}H="radius_"===l?"radius":l;n=Float.$valueOf(this.floatParameter(m));l="radius_";f=!1;b=!0;break;case 10:case 1048577:e&&this.invPO();2<++g&&a.bad();"to".equals(k)&&(b=!0);H=k;k="to";n=this.atomExpressionAt(m);m=a.iToken;break;case 1074790746:1<
g&&this.invPO();if(10==this.tokAt(m+1)||1048577==this.tokAt(m+1)&&!b){H="toBitSet";n=this.atomExpressionAt(++m);m=a.iToken;b=!0;break}else b||this.error(19);k="to";continue;case 1073741937:b||this.error(19);l="faceCenterOffset";f=!0;continue;case 1073741924:0==g&&this.error(19);l="distanceFactor";f=!0;continue;case 1766856708:case 603979967:case 1073742074:z=this.getColorTrans(a,m,!0,t);m=a.iToken;continue;case 1073741886:case 1073741948:H="collapsed";n=1073741886==a.theTok?Boolean.TRUE:Boolean.FALSE;
e&&this.error(18);e=!0;break;case 1073742044:case 1073741933:case 1073741956:d&&this.error(18);H=this.paramAsStr(m);d=!0;break;case 1073741964:h=a.theTok;continue;default:if(a.isColorParam(m)){t[0]=a.getArgbParam(m);m=a.iToken;continue}this.invArg()}this.setShapeProperty(21,H,n);if(c)return!1}!b&&(!e&&!d&&0==h)&&this.error(19);b&&this.setShapeProperty(21,"generate",null);-2147483648!=t[0]&&this.setShapeProperty(21,"colorThis",Integer.$valueOf(t[0]));3.4028235E38!=z&&a.setShapeTranslucency(21,"","translucentThis",
z,null);0!=h&&this.setShapeProperty(21,"token",Integer.$valueOf(h));this.setShapeProperty(21,"init",Boolean.FALSE);return!0});da(c$,"evalParallel",function(a,b){var c=(new JS.ScriptEval).setViewer(this.vwr);c.historyDisabled=!0;c.compiler=new JS.ScriptCompiler(this.vwr);c.sm=b;try{c.restoreScriptContext(a,!0,!1,!1),c.allowJSThreads=!1,c.dispatchCommands(!1,!1,!1)}catch(e){if(Z(e,Exception))return this.e.vwr.setStringProperty("_errormessage",""+e),null==c.thisContext&&(JU.Logger.error("Error evaluating context "+
e),this.vwr.isJS||e.printStackTrace()),!1;throw e;}return!0},"JS.ScriptContext,JV.ShapeManager");da(c$,"write",function(a){var b=0,c=0,e,d;null==a?(a=this.st,b=c=1,e=!0,d=this.vwr.isApplet()&&!this.vwr.isSignedApplet()||!this.vwr.haveAccess(JV.Viewer.ACCESS.ALL)||0<this.vwr.getPathForAllFiles().length):(e=!1,d=!0);var f=e?this.slen:a.length,h=0,g=0,k=-1,l=-1,z=-2147483648,t=this.vwr.getBoolean(603979934),m=this.vwr.getExportDriverList(),H="PNGJ",n=null,I="",v=null,G=null,r=null,q=null,s=null,C=null,
B=Array(1),y=!1,E=!1,F=!1,M=null,K=null,u="SPT",T=e&&1==a.length?1073741884:JS.CmdExt.tokAtArray(b,a);switch(T){case 0:break;case 135271429:this.e.isArrayParameter(b+1)&&(K=this.e.stringParameterSet(++b),r=G=".",c=b=this.e.iToken+1,T=this.tokAt(b));break;default:u=JS.SV.sValue(this.tokenAt(b,a)).toUpperCase()}e&&1073741848==this.tokAt(this.slen-2)&&(u=this.paramAsStr(this.slen-1).toUpperCase(),c=f,f-=2,T=0);switch(T){case 15:case 6:u="VAR";C=this.tokenAt(b++,a);break;case 135270418:case 1052714:case 1716520985:s=
this.plot(a);if(!e)return s;break;case 1073741983:u="INLINE";n=JS.SV.sValue(this.tokenAt(++b,a));b++;break;case 1073742102:u="PGRP";b++;I=JS.SV.sValue(this.tokenAt(b,a)).toLowerCase();I.equals("draw")&&b++;break;case 1048581:b++;y=!0;break;case 1073742158:case 135271429:for(q=JS.SV.sValue(this.tokenAt(++b,a)).toLowerCase();q.equals("localpath")||q.equals("remotepath");)q.equals("localpath")?G=JS.SV.sValue(this.tokenAt(++b,a)):r=JS.SV.sValue(this.tokenAt(++b,a)),q=JS.SV.sValue(this.tokenAt(++b,a)).toLowerCase();
u="SPT";break;case 1229984263:case 135368713:case 1610616855:case 135180:case 1073742015:case 1073742018:case 1183762:case 135188:b++;break;case 1073741991:u="ZIPALL";b++;break;case 36868:u="VAR";b+=2;break;case 4115:case 1073741824:case 1073741979:case 1073742139:case 4:case 4166:switch(T){case 1073741979:b++;break;case 4166:g=this.e.intParameterRange(++b,1,10);if(2147483647==g)return"";this.chk||(this.vwr.setVibrationOff(),this.e.isJS||this.e.delayScript(100));b++;break;case 4115:var O;b+1<f&&1048577==
a[++b].tok||10==a[b].tok?(O=this.e.atomExpression(a,b,0,!0,!1,!0,!0),b=this.e.iToken+1):O=this.vwr.getAllAtoms();this.chk||(M=this.vwr.ms.getModelBS(O,!0));break;case 1073742139:q=JS.SV.sValue(this.tokenAt(++b,a)).toUpperCase();JU.PT.isOneOf(q,";PNG;PNGJ;")&&(H=q,b++);break;default:T=1073741979}if(1073741979==T)if(T=JS.T.getTokenFromName(JS.SV.sValue(a[b]).toLowerCase()),null!=T&&(u=JS.SV.sValue(T).toUpperCase(),(y=1048581==T.tok)&&b++),JU.PT.isOneOf(u,m.toUpperCase())){b++;u=u.substring(0,1).toUpperCase()+
u.substring(1).toLowerCase();E=!0;e&&(v="Jmol."+u.toLowerCase());break}else if(JU.PT.isOneOf(u,";ZIP;ZIPALL;SPT;STATE;")){b++;break}else y||(u="(image)");2==JS.CmdExt.tokAtArray(b,a)&&(k=JS.SV.iValue(this.tokenAt(b++,a)),l=JS.SV.iValue(this.tokenAt(b++,a)))}if(null==s){if(c<f){q=JS.SV.sValue(this.tokenAt(b,a));if(q.equalsIgnoreCase("clipboard")){if(this.chk)return""}else JU.PT.isOneOf(q.toLowerCase(),";jpg;jpeg;jpg64;jpeg64;gif;gift;pdf;ppm;png;pngj;pngt;")?(2==JS.CmdExt.tokAtArray(b+1,a)&&2==JS.CmdExt.tokAtArray(b+
2,a)&&(k=JS.SV.iValue(this.tokenAt(++b,a)),l=JS.SV.iValue(this.tokenAt(++b,a))),2==JS.CmdExt.tokAtArray(b+1,a)&&(z=JS.SV.iValue(this.tokenAt(++b,a)))):JU.PT.isOneOf(q.toLowerCase(),";xyz;xyzrn;xyzvib;mol;sdf;v2000;v3000;json;pdb;pqr;cml;")&&(u=q.toUpperCase(),b+1==f&&b++);u.equals("(image)")&&JU.PT.isOneOf(q.toLowerCase(),";jpg;jpeg;jpg64;jpeg64;gif;gift;pdf;ppm;png;pngj;pngt;scene;")&&(u=q.toUpperCase(),b++)}b+2==f&&(s=JS.SV.sValue(this.tokenAt(++b,a)),0<s.length&&"."!=s.charAt(0)&&(u=q.toUpperCase()));
switch(JS.CmdExt.tokAtArray(b,a)){case 0:d=!0;break;case 1073741884:break;case 1073741824:case 4:v=JS.SV.sValue(this.tokenAt(b,a));b==f-3&&1048583==JS.CmdExt.tokAtArray(b+1,a)&&(v+="."+JS.SV.sValue(this.tokenAt(b+2,a)));if("VAR"!==u&&b==c&&!y)u="IMAGE";else if(0<v.length&&"."==v.charAt(0)&&(b==c+1||b==c+2))v=JS.SV.sValue(this.tokenAt(b-1,a))+v,"VAR"!==u&&b==c+1&&(u="IMAGE");if(v.equalsIgnoreCase("clipboard")||!this.vwr.haveAccess(JV.Viewer.ACCESS.ALL))v=null;break;default:this.invArg()}if(u.equals("IMAGE")||
u.equals("(image)")||u.equals("FRAME")||u.equals("VIBRATION"))u=null!=v&&0<=v.indexOf(".")?v.substring(v.lastIndexOf(".")+1).toUpperCase():"JPG",JU.PT.isOneOf(u,";PNGJ;PNGT;GIFT;")&&(v=v.substring(0,v.length-1));u.equals("MNU")?u="MENU":u.equals("WRL")||u.equals("VRML")?(u="Vrml",E=!0):u.equals("X3D")?(u="X3d",E=!0):u.equals("IDTF")?(u="Idtf",E=!0):u.equals("MA")?(u="Maya",E=!0):u.equals("JS")?(u="Js",E=!0):u.equals("OBJ")?(u="Obj",E=!0):u.equals("JVXL")?u="ISOSURFACE":u.equals("XJVXL")?u="ISOSURFACE":
u.equals("JMOL")?u="ZIPALL":u.equals("HIS")&&(u="HISTORY");if(u.equals("COORD")||u.equals("COORDS"))u=null!=v&&0<=v.indexOf(".")?v.substring(v.lastIndexOf(".")+1).toUpperCase():"XYZ";F=JU.PT.isOneOf(u.toLowerCase(),";jpg;jpeg;jpg64;jpeg64;gif;gift;pdf;ppm;png;pngj;pngt;scene;");null!=K&&(u.equals("PNG")&&(u="PNGJ"),!u.equals("PNGJ")&&!u.equals("ZIPALL")&&this.invArg());!F&&(!E&&!JU.PT.isOneOf(u,";SCENE;JMOL;ZIP;ZIPALL;SPT;HISTORY;MO;ISOSURFACE;MESH;PMESH;VAR;FILE;FUNCTION;CML;JSON;XYZ;XYZRN;XYZVIB;MENU;MOL;PDB;PGRP;PQR;QUAT;RAMA;SDF;V2000;V3000;INLINE;"))&&
this.e.errorStr2(54,"COORDS|FILE|FUNCTIONS|HISTORY|IMAGE|INLINE|ISOSURFACE|JMOL|MENU|MO|POINTGROUP|QUATERNION [w,x,y,z] [derivative]|RAMACHANDRAN|SPT|STATE|VAR x|ZIP|ZIPALL  CLIPBOARD","CML|GIF|GIFT|JPG|JPG64|JMOL|JVXL|MESH|MOL|PDB|PMESH|PNG|PNGJ|PNGT|PPM|PQR|SDF|CD|JSON|V2000|V3000|SPT|XJVXL|XYZ|XYZRN|XYZVIB|ZIP"+m.toUpperCase().$replace(";","|"));if(this.chk)return"";s=null;b=!1;if(null==n||E){n=u.intern();if(E){t&&JU.Logger.startTimer("export");g=new java.util.Hashtable;g.put("type",n);null!=v&&
g.put("fileName",v);(e||null!=v)&&g.put("fullPath",B);g.put("width",Integer.$valueOf(k));g.put("height",Integer.$valueOf(l));n=this.vwr.generateOutputForExport(g);if(null==n||0==n.length)return"";if(!e)return n;(u.equals("Povray")||u.equals("Idtf"))&&null!=B[0]?(k=u.equals("Idtf")?".tex":".ini",v=B[0]+k,e=new java.util.Hashtable,e.put("fileName",v),e.put("type",k),e.put("text",n),e.put("fullPath",B),s=this.vwr.processWriteOrCapture(e),u.equals("Idtf")&&(n=n.substring(0,n.indexOf("\\begin{comment}"))),
n="Created "+B[0]+":\n\n"+n,t&&this.showString(JU.Logger.getTimerMsg("export",0))):s=n;null!=s&&(s.startsWith("OK")||this.e.evalError(s,null),this.e.report(n));return""}if("MENU"===n)n=this.vwr.getMenu("");else if("PGRP"===n)n=this.vwr.getPointGroupAsString(I.equals("draw"),null,0,1);else if("PDB"===n||"PQR"===n)d?n=this.vwr.getPdbAtomData(null,null):b=!0;else if("FILE"===n)d?n=this.vwr.getCurrentFileAsString("script"):b=!0,"?".equals(v)&&(v="?Jmol."+this.vwr.getP("_fileType"));else if(("SDF"===n||
"MOL"===n||"V2000"===n||"V3000"===n||"CD"===n||"JSON"===n)&&y)n=this.vwr.getModelExtract("selected",!0,!1,n),n.startsWith("ERROR:")&&(s=n);else if("XYZ"===n||"XYZRN"===n||"XYZVIB"===n||"MOL"===n||"SDF"===n||"V2000"===n||"V3000"===n||"CML"===n||"CD"===n||"JSON"===n)n=this.vwr.getData("selected",n),n.startsWith("ERROR:")&&(s=n);else if("FUNCTION"===n)n=this.vwr.getFunctionCalls(null),u="TXT";else if("VAR"===n){null==C&&(C=this.e.getParameter(JS.SV.sValue(this.tokenAt(e?2:1,a)),1073742190,!0));a=null;
if(15==C.tok)a=new JU.Lst,a.addLast(C.value.data);else if(6==C.tok&&(I=C.value,I.containsKey("$_BINARY_$")&&(a=new JU.Lst,null!=v)))for(var R,I=I.entrySet().iterator();I.hasNext()&&((R=I.next())||1);)if(G=R.getKey(),!G.equals("$_BINARY_$"))if(r=R.getValue(),s=15==r.tok?r.value.data:null,null==s&&(s=r.asString(),s=s.startsWith(";base64,")?JU.Base64.decodeBase64(s):s.getBytes()),G.equals("_DATA_")){a=null;null==s&&(s=r.value.data);break}else G.equals("_IMAGE_")?(a.add(0,G),a.add(1,s)):(a.addLast(G),
a.addLast(null),a.addLast(s));null==a?null==s&&(n=C.asString(),u="TXT"):null!=v&&null==(s=n=this.vwr.createZip(v,1==a.size()?"BINARY":"ZIPDATA",a))&&this.e.evalError("#CANCELED#",null)}else if("SPT"===n)if(y)C=this.vwr.ms.getTaintedAtoms(2),this.vwr.setAtomCoordsRelative(JU.P3.new3(0,0,0),null),n=this.vwr.getStateInfo(),this.vwr.ms.setTaintedAtoms(C,2);else{if(n=this.vwr.getStateInfo(),null!=G||null!=r)n=JV.FileManager.setScriptFileReferences(n,G,r,null)}else"ZIP"===n||"ZIPALL"===n?null!=v&&null==
(s=n=this.vwr.createZip(v,u,K))&&this.e.evalError("#CANCELED#",null):"HISTORY"===n?(n=this.vwr.getSetHistory(2147483647),u="SPT"):"MO"===n?(n=this.getMoJvxl(2147483647),u="XJVXL"):"PMESH"===n?(null==(n=this.getIsosurfaceJvxl(!0,28))&&this.error(31),u="XJVXL"):"ISOSURFACE"===n||"MESH"===n?(null==(n=this.getIsosurfaceJvxl("MESH"===n,24))&&this.error(31),u=0<=n.indexOf("<?xml")?"XJVXL":"JVXL",d||this.showString(this.getShapeProperty(24,"jvxlFileInfo"))):(h=-1,0>z&&(z=-1));null==n&&!b&&(n="");0==h&&!b&&
(null==s||V(s,String));F&&(this.e.refresh(!1),0>k&&(k=this.vwr.getScreenWidth()),0>l&&(l=this.vwr.getScreenHeight()))}if(!e)return n;if(d)return this.e.showStringPrint(n,!0),"";if(null!=s&&V(s,String))return 0!=s.indexOf("OK")&&alert(s),this.e.report(s),s;if(u.equals("SCENE"))s=H;else if(null==s&&(!F||null!=v))s=n;t&&JU.Logger.startTimer("write");b?s=this.vwr.writeFileData(v,u,0,null):(e=new java.util.Hashtable,null!=v&&e.put("fileName",v),e.put("backgroundColor",Integer.$valueOf(this.vwr.getBackgroundArgb())),
e.put("type",u),V(s,String)&&-2147483648==z?e.put("text",s):V(s,Array)&&e.put("bytes",s),null!=K&&e.put("scripts",K),null!=M&&e.put("bsFrames",M),e.put("fullPath",B),e.put("quality",Integer.$valueOf(z)),e.put("width",Integer.$valueOf(k)),e.put("height",Integer.$valueOf(l)),e.put("nVibes",Integer.$valueOf(g)),s=this.vwr.processWriteOrCapture(e));t&&this.showString(JU.Logger.getTimerMsg("write",0))}return!this.chk&&null!=s?(s.startsWith("OK")||(this.e.evalError(s,null),alert(s)),this.e.report(s+(F?
"; width="+k+"; height="+l:"")),s):""},"~A");l(c$,"show",function(){var a=null,b=this.paramAsStr(1),c=null,e=null,d=2,e=this.getToken(1),f=V(e,JS.SV)?0:e.tok;4==f&&(e=JS.T.getTokenFromName(b.toLowerCase()),null!=e&&(f=e.tok));1297090050!=f&&(1073742158!=f&&1716520985!=f)&&this.checkLength(-3);if(2==this.slen&&0<=b.indexOf("?"))this.showString(this.vwr.getAllSettings(b.substring(0,b.indexOf("?"))));else{switch(f){case 0:this.chk||(c=this.e.theToken.escape());break;case 1073741925:this.e.checkLength23();
d=this.st.length;this.chk||(c=this.vwr.ms.getInfo(this.vwr.am.cmi,"domains"),c=V(c,JS.SV)?this.vwr.getAnnotationInfo(c,this.e.optParameterAsString(2),1073741925):"domain information has not been loaded");break;case 1716520985:c=this.plot(this.st);d=this.st.length;break;case 1073742189:this.e.checkLength23();d=this.st.length;this.chk||(c=this.vwr.ms.getInfo(this.vwr.am.cmi,"validation"),c=V(c,JS.SV)?this.vwr.getAnnotationInfo(c,this.e.optParameterAsString(2),1073742189):"validation information has not been loaded");
break;case 135270423:this.chk||(c=JU.Escape.e(this.vwr.cacheList()));break;case 1073741916:this.e.checkLength23();d=this.st.length;this.chk||(c=this.vwr.ms.getInfo(this.vwr.am.cmi,"dssr"),c=null==c?"no DSSR information has been read":2<d?JS.SV.getVariable(this.vwr.extractProperty(c,this.stringParameter(2),-1)).asString():""+JS.SV.getVariable(c).asString());break;case 1073741915:this.checkLength(2);this.chk||(c=this.vwr.calculateStructures(null,!0,!1));break;case 545259571:this.checkLength(2);this.chk||
(c=this.vwr.getPathForAllFiles());break;case 1073742038:if(this.e.optParameterAsString(2).equalsIgnoreCase("1H")){d=3;this.chk||(c=this.vwr.getNMRPredict(!1));break}this.chk||this.vwr.getNMRPredict(!0);return;case 135267336:case 1073741929:case 1073741879:this.checkLength(1073741879==f?3:2);if(this.chk)return;try{c=this.vwr.getSmiles(null)}catch(h){if(Z(h,Exception))c=h.getMessage();else throw h;}switch(f){case 1073741929:if(0<c.length){this.vwr.show2D(c);return}c="Could not show drawing -- Either insufficient atoms are selected or the model is a PDB file.";
break;case 1073741879:d=3,0<c.length?(c=this.vwr.getChemicalInfo(c,this.getToken(2)),0<=c.indexOf("FileNotFound")&&(c="?")):c="Could not show name -- Either insufficient atoms are selected or the model is a PDB file."}break;case 1297090050:var e=0,g=null,k=null;3<this.slen&&4!=this.tokAt(3)?(g=this.centerParameter(2),k=this.centerParameter(++this.e.iToken)):e=2==this.tokAt(2)?this.intParameter(2):0;f=4==this.tokAt(this.e.iToken+1)?this.stringParameter(++this.e.iToken):null;this.checkLength(d=++this.e.iToken);
this.chk||(c=this.vwr.ms.getSymTemp(!0).getSymmetryInfoString(this.vwr.ms,this.vwr.am.cmi,e,g,k,null,f));break;case 1649412120:a=null;2<this.slen&&(a=J.c.VDW.getVdwType(this.paramAsStr(2)),null==a&&this.invArg());this.chk||this.showString(this.vwr.getDefaultVdwNameOrData(0,a,null));return;case 135368713:this.e.checkLength23();this.chk||this.showString(this.vwr.getFunctionCalls(this.e.optParameterAsString(2)));return;case 1085443:this.checkLength(2);this.chk||this.showString(this.vwr.getAllSettings(null));
return;case 1074790760:if(2==this.slen){this.chk||this.vwr.showUrl(this.e.getFullPathName());return}e=this.paramAsStr(2);this.chk||this.vwr.showUrl(e);return;case 1766856708:b="defaultColorScheme";break;case 1610612740:b="scaleAngstromsPerInch";break;case 135270418:case 1052714:if(this.chk)return;0>this.vwr.am.cmi&&this.e.errorStr(30,"show "+this.e.theToken.value);c=this.plot(this.st);d=this.slen;break;case 14:case 1113200654:this.chk||(c=this.getContext(!1));break;case 1073741888:e=this.e.optParameterAsString(2);
0<e.length&&(d=3);this.chk||(a=this.vwr.getColorSchemeList(e));break;case 1073742192:this.chk||(c=this.vwr.getAtomDefs(this.e.definedAtomSets)+this.vwr.g.getVariableList()+this.getContext(!0));break;case 536870926:this.chk||(c=this.vwr.getTrajectoryState());break;case 553648148:a=""+this.e.commandHistoryLevelMax;break;case 553648150:a=""+JU.Logger.getLogLevel();break;case 603979825:a=""+this.vwr.getBoolean(603979825);break;case 553648178:c="set strandCountForStrands "+this.vwr.getStrandCount(12)+
"; set strandCountForMeshRibbon "+this.vwr.getStrandCount(13);break;case 536875070:c=this.vwr.showTimeout(2==(d=this.slen)?null:this.paramAsStr(2));break;case 536870918:a=JU.Escape.eP(this.vwr.getDefaultLattice());break;case 4126:this.chk||(c=this.vwr.getMinimizationInfo());break;case 1611272194:switch(this.vwr.g.axesMode){case J.c.AXES.UNITCELL:c="set axesUnitcell";break;case J.c.AXES.BOUNDBOX:c="set axesWindow";break;default:c="set axesMolecular"}break;case 1610612737:c="set bondMode "+(this.vwr.getBoolean(603979812)?
"OR":"AND");break;case 1650071565:this.chk||(c="set strandCountForStrands "+this.vwr.getStrandCount(12)+"; set strandCountForMeshRibbon "+this.vwr.getStrandCount(13));break;case 1612189718:c="set hbondsBackbone "+this.vwr.getBoolean(603979852)+";set hbondsSolid "+this.vwr.getBoolean(603979854);break;case 1611141175:this.chk||(c=this.vwr.getSpinState());break;case 1611141176:c="set ssbondsBackbone "+this.vwr.getBoolean(603979952);break;case 1610625028:case 1611141171:c="selectionHalos "+(this.vwr.getSelectionHaloEnabled(!1)?
"ON":"OFF");break;case 1613758470:c="set selectHetero "+this.vwr.getBoolean(1613758470);break;case 1073741828:c=JU.Escape.eAP(this.vwr.getAdditionalHydrogens(null,!0,!0,null));break;case 1613758476:c="set selectHydrogens "+this.vwr.getBoolean(1613758476);break;case 553648130:case 553648142:case 536870924:case 553648176:case 553648172:case 1073741995:this.chk||(c=this.vwr.getSpecularState());break;case 1073742136:case 4146:this.chk||(c=this.vwr.stm.listSavedStates());break;case 1614417948:this.chk||
(c=this.vwr.getUnitCellInfoText());break;case 1048581:if(2==(d=this.slen)){this.chk||(c=this.vwr.getCoordinateState(this.vwr.bsA()));break}f=this.paramAsStr(2);this.chk||(c=this.vwr.stm.getSavedCoordinates(f));break;case 1073742158:!this.chk&&null==this.e.outputBuffer&&this.vwr.sm.clearConsole();if(2==(d=this.slen)){this.chk||(c=this.vwr.getStateInfo());break}e=this.paramAsStr(2);if(e.equals("/")&&4==(d=this.slen)){e=this.paramAsStr(3).toLowerCase();if(!this.chk){f=JU.PT.split(this.vwr.getStateInfo(),
"\n");c=new JU.SB;for(g=0;g<f.length;g++)0<=f[g].toLowerCase().indexOf(e)&&c.append(f[g]).appendC("\n");c=c.toString()}break}else if(1229984263==this.tokAt(2)&&4==(d=this.slen)){this.chk||(c=this.vwr.getEmbeddedFileState(this.paramAsStr(3),!0));break}d=3;this.chk||(c=this.vwr.stm.getSavedState(e));break;case 1641025539:if(2==(d=this.slen)){this.chk||(c=this.vwr.getProteinStructureState());break}f=this.paramAsStr(2);this.chk||(c=this.vwr.stm.getSavedStructure(f));break;case 135270408:f=3==(d=this.slen)?
this.paramAsStr(2):null;this.chk||(c=null==f?this.lastData:this.vwr.getData(f),c=null==c?"no data":JU.Escape.encapsulateData(c[0],c[1],c[3].intValue()));break;case 1073742152:f=null;2==(d=this.slen)?this.chk||(f=this.vwr.getSpaceGroupInfo(null)):(e=this.paramAsStr(2),this.chk||(f=this.vwr.getSpaceGroupInfo(JU.PT.rep(e,"''",'"'))));null!=f&&(c=""+f.get("spaceGroupInfo")+f.get("symmetryInfo"));break;case 1048582:d=3;c=this.e.setObjectProperty();break;case 1679429641:this.chk||(c=this.vwr.ms.getBoundBoxCommand(!0));
break;case 12289:this.chk||(c="center "+JU.Escape.eP(this.vwr.tm.getRotationCenter()));break;case 135176:this.chk||(c=this.getShapeProperty(22,"command"));break;case 1229984263:this.chk||this.vwr.sm.clearConsole();if(2==this.slen){this.chk||(c=this.vwr.getCurrentFileAsString("script"));null==c&&(c="<unavailable>");break}d=3;a=this.paramAsStr(2);this.chk||(c=this.vwr.getFileAsString3(a,!0,null));break;case 4115:c=1048579==this.tokAt(2)&&0<(d=3)?this.vwr.getModelFileInfoAll():this.vwr.getModelFileInfo();
break;case 1610616855:f=2==(d=this.slen)?2147483647:this.intParameter(2);1>f&&this.invArg();this.chk||(this.vwr.sm.clearConsole(),0==this.e.scriptLevel&&this.vwr.removeCommand(),c=this.vwr.getSetHistory(f));break;case 135180:this.chk||(c=this.getShapeProperty(24,"jvxlDataXml"));break;case 1183762:this.e.optParameterAsString(2).equalsIgnoreCase("list")?(c=this.vwr.getMoInfo(-1),d=3):(f=2==(d=this.slen)?-2147483648:this.intParameter(2),this.chk||(c=this.getMoJvxl(f)));break;case 1095766030:this.chk||
(c=this.vwr.ms.getModelInfoAsString());break;case 537006096:this.chk||(c=this.vwr.getMeasurementInfoAsString());break;case 1073741863:d=3;!this.chk&&this.slen==d&&(c=this.vwr.getOrientationText(this.tokAt(2),null));break;case 1073742132:f=this.tokAt(2),0==f?f=1073742132:d=3;case 1073742178:case 4130:this.chk||(c=this.vwr.getOrientationText(f,null));break;case 1073742077:d=2;if(3<this.slen)break;switch(f=this.tokAt(2)){case 1073742178:case 1073742132:case 4130:case 0:this.chk||(c=this.vwr.getOrientationText(f,
null));break;default:e=this.e.optParameterAsString(2),c=this.vwr.getOrientationText(1073742035,e)}d=this.slen;break;case 1073742088:this.chk||(c=this.vwr.getPDBHeader());break;case 1073742102:this.chk||this.showString(this.vwr.getPointGroupAsString(!1,null,0,0));return;case 1089470478:this.chk||(c=this.vwr.ms.getSymmetryInfoAsString());break;case 1073742176:this.chk||(c="transform:\n"+this.vwr.tm.getTransformText());break;case 4168:c="zoom "+(this.vwr.tm.zoomEnabled?""+this.vwr.tm.getZoomSetting():
"off");break;case 1611272202:c=this.vwr.getShowFrank()?"frank ON":"frank OFF";break;case 1666189314:b="solventProbeRadius";break;case 1087373320:if(3==(d=this.slen)&&1048588==this.tokAt(2))f=1087373319;case 1073741864:case 1087373316:case 1073742120:case 1114638363:case 1087373318:case 1141899265:case 1073741982:this.chk||(c=this.vwr.getChimeInfo(f));break;case 537022465:case 1610612738:case 20482:case 1613758488:a="?";break;case 1073742031:f=2==(d=this.slen)?null:this.paramAsStr(2);this.chk||(c=
this.vwr.getBindingInfo(f));break;case 1073742015:this.chk||(a=this.vwr.getMenu(""));break;case 1073741824:b.equalsIgnoreCase("fileHeader")&&(this.chk||(c=this.vwr.getPDBHeader()));break;case 1073741992:case 36868:b=this.paramAsStr(d++),e=this.e.getParameter(b,1073742190,!0),this.chk||(c=1073741992==f?e.toJSON():e.escape())}this.checkLength(d);this.chk||(null!=c?this.showString(c):null!=a?this.showString(b+" = "+a):null!=b&&(0<=b.indexOf(" ")?this.showString(b):this.showString(b+" = "+this.e.getParameter(b,
1073742190,!0).escape())))}});l(c$,"stereo",function(){for(var a=J.c.STER.DOUBLE,b=-5,c=!1,e=null,d=0,f=1;f<this.slen;++f)if(this.e.isColorParam(f))1<d&&this.e.bad(),0==d&&(e=X(2,0)),c||(b=3),e[d]=this.e.getArgbParam(f),0==d++&&(e[1]=~e[0]),f=this.e.iToken;else switch(this.getToken(f).tok){case 1048589:this.e.checkLast(this.e.iToken=1);this.e.iToken=1;break;case 1048588:this.e.checkLast(this.e.iToken=1);a=J.c.STER.NONE;break;case 2:case 3:b=this.floatParameter(f);c=!0;break;case 1073741824:if(c||
(b=3),a=J.c.STER.getStereoMode(this.paramAsStr(f)),null!=a)break;default:this.invArg()}this.chk||this.vwr.setStereoMode(e,a,b)});l(c$,"struts",function(){var a=this.e,b=1073742072==this.tokAt(1)||1048589==this.tokAt(1)||1==this.slen,c=a.getMadParameter();if(2147483647==c)return!1;b&&(c=Math.round(2E3*this.vwr.getFloat(570425406)));this.setShapeProperty(1,"type",Integer.$valueOf(32768));a.setShapeSizeBs(1,c,null);this.setShapeProperty(1,"type",Integer.$valueOf(1023));return!0});l(c$,"addShapeProperty",
function(a,b,c){this.chk||a.addLast([b,c])},"JU.Lst,~S,~O");l(c$,"assign",function(){var a=this.tokAt(1),b=this.atomExpressionAt(2).nextSetBit(0),c=-1,e=null;if(!(0>b)){4106==a?c=this.atomExpressionAt(++this.e.iToken).nextSetBit(0):e=this.paramAsStr(++this.e.iToken);var d=++this.e.iToken<this.slen?this.centerParameter(this.e.iToken):null;if(!this.chk)switch(a){case 1141899265:this.e.clearDefinedVariableAtomSets();this.assignAtom(b,d,e);break;case 1678770178:this.assignBond(b,(e+"p").charAt(0));break;
case 4106:this.assignConnect(b,c)}}});l(c$,"assignAtom",function(a,b,c){c.equals("X")&&this.vwr.setRotateBondIndex(-1);if(this.vwr.ms.at[a].mi==this.vwr.ms.mc-1){this.vwr.clearModelDependentObjects();var e=this.vwr.ms.getAtomCount();if(null==b)this.vwr.sm.modifySend(a,this.vwr.ms.at[a].mi,1,this.e.fullCommand),this.vwr.ms.assignAtom(a,c,!0),JU.PT.isOneOf(c,";Mi;Pl;X;")||this.vwr.ms.setAtomNamesAndNumbers(a,-e,null),this.vwr.sm.modifySend(a,this.vwr.ms.at[a].mi,-1,"OK"),this.vwr.refresh(3,"assignAtom");
else{var d=this.vwr.ms.at[a],f=JU.BSUtil.newAndSetBit(a);b=[b];var h=new JU.Lst;h.addLast(d);d=d.mi;this.vwr.sm.modifySend(a,d,3,this.e.fullCommand);try{f=this.vwr.addHydrogensInline(f,h,b),a=f.nextSetBit(0),this.vwr.ms.assignAtom(a,c,!1)}catch(g){if(!Z(g,Exception))throw g;}this.vwr.ms.setAtomNamesAndNumbers(a,-e,null);this.vwr.sm.modifySend(a,d,-3,"OK")}}},"~N,JU.P3,~S");l(c$,"assignBond",function(a,b){var c=-1;try{c=this.vwr.getAtomModelIndex(this.vwr.ms.bo[a].getAtomIndex1());this.vwr.sm.modifySend(a,
c,2,this.e.fullCommand);var e=this.vwr.ms.setBondOrder(a,b);null==e||"0"==b?this.vwr.refresh(3,"setBondOrder"):this.vwr.addHydrogens(e,!1,!0);this.vwr.sm.modifySend(a,c,-2,""+b)}catch(d){if(Z(d,Exception))JU.Logger.error("assignBond failed"),this.vwr.sm.modifySend(a,c,-2,"ERROR "+d);else throw d;}},"~N,~S");l(c$,"assignConnect",function(a,b){this.vwr.clearModelDependentObjects();var c=JU.AU.newFloat2(1);c[0]=[a,b];var e=this.vwr.ms.at[a].mi;this.vwr.sm.modifySend(a,e,2,this.e.fullCommand);this.vwr.ms.connect(c);
this.vwr.ms.assignAtom(a,".",!0);this.vwr.ms.assignAtom(b,".",!0);this.vwr.sm.modifySend(a,e,-2,"OK");this.vwr.refresh(3,"assignConnect")},"~N,~N");l(c$,"getContext",function(a){for(var b=new JU.SB,c=this.e.thisContext;null!=c;)a?null!=c.vars&&(b.append(this.getScriptID(c)),b.append(JV.StateManager.getVariableList(c.vars,80,!0,!1))):b.append(JS.ScriptError.getErrorLineMessage(c.functionName,c.scriptFileName,this.e.getLinenumber(c),c.pc,JS.ScriptEval.statementAsString(this.vwr,c.statement,-9999,this.e.debugHigh))),
c=c.parentContext;a?null!=this.e.contextVariables&&(b.append(this.getScriptID(null)),b.append(JV.StateManager.getVariableList(this.e.contextVariables,80,!0,!1))):b.append(this.e.getErrorLineMessage2());return b.toString()},"~B");l(c$,"getAtomicPotentials",function(a,b,c){var e=R(this.vwr.getAtomCount(),0),d=J.api.Interface.getOption("quantum.MlpCalculation",this.vwr,"script");d.set(this.vwr);c=null==c?null:this.vwr.getFileAsString3(c,!1,null);d.assignPotentials(this.vwr.ms.at,e,this.vwr.getSmartsMatch("a",
a),this.vwr.getSmartsMatch("/noAromatic/[$(C=O),$(O=C),$(NC=O)]",a),b,c);return e},"JU.BS,JU.BS,~S");l(c$,"getColorTrans",function(a,b,c,e){c=3.4028235E38;1766856708!=a.theTok&&--b;switch(this.tokAt(b+1)){case 603979967:b++;c=this.isFloatParameter(b+1)?a.getTranslucentLevel(++b):this.vwr.getFloat(570425354);break;case 1073742074:b++,c=0}a.isColorParam(b+1)?e[0]=a.getArgbParam(++b):1048587==this.tokAt(b+1)?(e[0]=0,a.iToken=b+1):3.4028235E38==c?this.invArg():e[0]=-2147483648;return c},"JS.ScriptEval,~N,~B,~A");
l(c$,"getCapSlabObject",function(a,b){if(0>a)return JU.TempArray.getSlabWithinRange(a,0);var c=this.e,e=null,d=554176565==this.tokAt(a),f=this.tokAt(a+1),h=null,g=h=null,k=null,l=null;if(603979967==f)switch(k=this.isFloatParameter(++a+1)?this.floatParameter(++a):0.5,c.isColorParam(a+1)?(k=Short.$valueOf(JU.C.getColixTranslucent3(JU.C.getColix(c.getArgbParam(a+1)),0!=k,k)),a=c.iToken):k=Short.$valueOf(JU.C.getColixTranslucent3(1,0!=k,k)),f=this.tokAt(a+1)){case 1073742018:case 1073741938:l=Integer.$valueOf(f);
f=this.tokAt(++a+1);break;default:l=Integer.$valueOf(1073741938)}switch(f){case 1048588:return c.iToken=a+1,Integer.$valueOf(-2147483648);case 1048587:c.iToken=a+1;break;case 1048582:a++;e=[Float.$valueOf(1),this.paramAsStr(++a)];f=1073742018;break;case 135266325:a++;if(1073742114==this.tokAt(++a))e=this.floatParameter(++a),f=this.floatParameter(++a),e=[Float.$valueOf(e),Float.$valueOf(f)],f=1073742114;else if(this.isFloatParameter(a)){e=this.floatParameter(a);if(c.isCenterParameter(++a))if(h=this.centerParameter(a),
this.chk||!V(c.expressionResult,JU.BS))h=[h];else for(var z=this.vwr.ms.at,g=c.expressionResult,h=Array(g.cardinality()),t=0,m=g.nextSetBit(0);0<=m;m=g.nextSetBit(m+1),t++)h[t]=z[m];else h=c.getPointArray(a,-1,!1);0==h.length&&(c.iToken=a,this.invArg());e=[Float.$valueOf(e),h,g]}else e=c.getPointArray(a,4,!1),f=1679429641;break;case 1679429641:c.iToken=a+1;e=JU.BoxInfo.getCriticalPoints(this.vwr.ms.getBBoxVertices(),null);break;case 1073741872:case 1614417948:c.iToken=a+1;c=this.vwr.getCurrentUnitCell();
if(null==c)1614417948==f&&this.invArg();else{h=JU.BoxInfo.getCriticalPoints(c.getUnitCellVertices(),c.getCartesianOffset());c=K(c.getUnitCellInfoType(6));e=g=null;switch(c){case 1:e=JU.V3.newVsub(h[2],h[0]),e.scale(1E3);case 2:g=JU.V3.newVsub(h[1],h[0]),g.scale(1E3),h[0].sub(g),h[1].scale(2E3),1==c&&(h[0].sub(e),h[2].scale(2E3))}e=h}break;case 10:case 1048577:if(e=this.atomExpressionAt(a+1),f=3,!c.isCenterParameter(++c.iToken))break;default:if(!b&&d&&this.isFloatParameter(a+1)){e=this.floatParameter(++a);
if(!this.isFloatParameter(a+1))return Integer.$valueOf(K(e));f=this.floatParameter(++a);e=[Float.$valueOf(e),Float.$valueOf(f)];f=1073742114;break}h=c.planeParameter(++a);f=this.isFloatParameter(c.iToken+1)?this.floatParameter(++c.iToken):NaN;Float.isNaN(f)||(h.w-=f);e=h;f=135266319}return JU.TempArray.getSlabObjectType(f,e,!d,null==l?null:[l,k])},"~N,~B");l(c$,"getIsosurfaceJvxl",function(a,b){return this.chk?"":this.getShapeProperty(b,a?"jvxlMeshX":"jvxlDataXml")},"~B,~N");l(c$,"getMoJvxl",function(a){this.sm.loadShape(27);
var b=this.vwr.am.cmi;0>b&&this.e.errorStr(30,"MO isosurfaces");var c=this.vwr.getModelAuxiliaryInfoValue(b,"moData");null==c&&this.error(27);var e=this.getShapeProperty(27,"moNumber");(null==e||0==e.intValue())&&this.setShapeProperty(27,"init",Integer.$valueOf(b));this.setShapeProperty(27,"moData",c);return this.getShapePropertyIndex(27,"showMO",a)},"~N");l(c$,"getScriptID",function(a){return"\n# "+(null==a?this.e.functionName:"function "+a.functionName)+" (file "+(null==a?this.e.scriptFileName:
a.scriptFileName)+(null==a?"":" context "+a.id)+")\n"},"JS.ScriptContext");l(c$,"getShapePropertyIndex",function(a,b,c){return this.sm.getShapePropertyIndex(a,b,c)},"~N,~S,~N");l(c$,"tokenAt",function(a,b){return a<b.length?b[a]:null},"~N,~A");c$.tokAtArray=l(c$,"tokAtArray",function(a,b){return a<b.length&&null!=b[a]?b[a].tok:0},"~N,~A");l(c$,"finalizeObject",function(a,b,c,e,d,f,h,g){d&&this.setShapeProperty(a,"set",f);-2147483648!=b&&this.e.setShapePropertyBs(a,"color",Integer.$valueOf(b),g);3.4028235E38!=
c&&this.e.setShapeTranslucency(a,"","translucent",c,g);0!=e&&this.setShapeProperty(a,"scale",Integer.$valueOf(e));0<h&&(this.e.setMeshDisplayProperty(a,h,0)||this.invArg())},"~N,~N,~N,~N,~B,~O,~N,JU.BS");l(c$,"moCombo",function(a){if(1073742156!=this.tokAt(this.e.iToken+1))return null;this.addShapeProperty(a,"squareLinear",Boolean.TRUE);this.e.iToken++;return R(0,0)},"JU.Lst");l(c$,"moOffset",function(a){var b=1073741973==this.getToken(a).tok?0:1,c=this.tokAt(++a);2==c&&0>this.intParameter(a)?b+=
this.intParameter(a):269484193==c?b+=this.intParameter(++a):269484192==c&&(b-=this.intParameter(++a));return b},"~N");l(c$,"setMoData",function(a,b,c,e,d,f,h){var g=this.e;if(!this.chk){0>f&&(f=this.vwr.am.cmi,0>f&&g.errorStr(30,"MO isosurfaces"));f=this.vwr.getModelAuxiliaryInfoValue(f,"moData");var k=null,l,z,t=0;if(null==c||2>c.length){null!=c&&1==c.length&&(e=0);null==f&&this.error(27);var m=f.containsKey("lastMoNumber")?f.get("lastMoNumber").intValue():0,k=f.containsKey("lastMoCount")?f.get("lastMoCount").intValue():
1;1073742108==b?b=m-1:1073742037==b&&(b=m+k);k=f.get("mos");t=null==k?0:k.size();0==t&&this.error(25);1==t&&1<b&&this.error(29);if(2147483647!=e){if(f.containsKey("HOMO"))b=f.get("HOMO").intValue()+e;else{b=-1;for(m=0;m<t;m++)if(l=k.get(m),null!=(z=l.get("occupancy"))){if(0.5>z.floatValue()){b=m;break}}else if(null!=(z=l.get("energy"))){if(0<z.floatValue()){b=m;break}}else break;0>b&&this.error(28);b+=e}JU.Logger.info("MO "+b)}(1>b||b>t)&&g.errorStr(26,""+t)}b=Math.abs(b);f.put("lastMoNumber",Integer.$valueOf(b));
f.put("lastMoCount",Integer.$valueOf(1));d&&null==c&&(c=[-100,b]);if(null!=c&&2>c.length){l=k.get(b-1);if(null==(z=l.get("energy")))c=[100,b];else{g=z.floatValue();e=JU.BS.newN(t);d=0;c=1==c.length&&1==c[0];for(m=0;m<t;m++)if(null!=(z=k.get(m).get("energy")))if(z=z.floatValue(),c?z<=g:z==g)e.set(m+1),d+=2;c=R(d,0);for(k=m=0;m<d;m+=2)c[m]=1,c[m+1]=k=e.nextSetBit(k+1);f.put("lastMoNumber",Integer.$valueOf(e.nextSetBit(0)));f.put("lastMoCount",Integer.$valueOf(ua(d/2)))}this.addShapeProperty(a,"squareLinear",
Boolean.TRUE)}this.addShapeProperty(a,"moData",f);null!=h&&this.addShapeProperty(a,"title",h);this.addShapeProperty(a,"molecularOrbital",null!=c?c:Integer.$valueOf(Math.abs(b)));this.addShapeProperty(a,"clear",null)}},"JU.Lst,~N,~A,~N,~B,~N,~S");l(c$,"getPlotMinMax",function(a,b,c){if(null==a)return 0;switch(c){case 1112539144:case 1112539145:case 1112539146:return b?180:-180;case 1112539141:case 1112539152:return b?360:0;case 1112539150:return b?1:-1}c=b?-1E10:1E10;for(var e=a.length;0<=--e;){var d=
a[e];Float.isNaN(d)||b==d>c&&(c=d)}return c},"~A,~B,~N");l(c$,"initIsosurface",function(a){var b=this.e;this.setShapeProperty(a,"init",this.fullCommand);b.iToken=0;var c=this.tokAt(1),e=this.tokAt(2);if(12291==c||12291==e&&1048579==this.tokAt(++b.iToken))return this.setShapeProperty(a,"delete",null),b.iToken+=2,this.slen>b.iToken&&(this.setShapeProperty(a,"init",this.fullCommand),this.setShapeProperty(a,"thisID","+PREVIOUS_MESH+")),null;b.iToken=1;return!b.setMeshDisplayProperty(a,0,c)&&(this.setShapeProperty(a,
"thisID","+PREVIOUS_MESH+"),22!=a&&this.setShapeProperty(a,"title",[this.thisCommand]),1074790550!=c&&(269484209==e||269484209==c&&b.setMeshDisplayProperty(a,0,e)))?(a=this.setShapeId(a,1,!1),b.iToken++,a):null},"~N");l(c$,"getWithinDistanceVector",function(a,b,c,e,d){var f=new JU.Lst,h=Array(2);if(null==e){var g=JU.P3.new3(b,b,b),k=JU.P3.newP(c);k.sub(g);g.add(c);h[0]=k;h[1]=g;f.addLast(c)}else c=this.vwr.ms.getBoxInfo(e,-Math.abs(b)),h[0]=c.getBoundBoxVertices()[0],h[1]=c.getBoundBoxVertices()[7],
1==e.cardinality()&&f.addLast(this.vwr.getAtomPoint3f(e.nextSetBit(0)));1==f.size()&&!d&&(this.addShapeProperty(a,"withinDistance",Float.$valueOf(b)),this.addShapeProperty(a,"withinPoint",f.get(0)));this.addShapeProperty(a,d?"displayWithin":"withinPoints",[Float.$valueOf(b),h,e,f])},"JU.Lst,~N,JU.P3,JU.BS,~B");l(c$,"setColorOptions",function(a,b,c,e){var d=this.e;this.getToken(b);var f="opaque";if(603979967==d.theTok)if(f="translucent",0>e){var h=this.isFloatParameter(b+1)?this.floatParameter(++b):
3.4028235E38;d.setShapeTranslucency(c,null,"translucent",h,null);null!=a&&(a.append(" translucent"),3.4028235E38!=h&&a.append(" ").appendF(h))}else d.setMeshDisplayProperty(c,b,d.theTok);else 1073742074==d.theTok?0<=e&&d.setMeshDisplayProperty(c,b,d.theTok):d.iToken--;e=Math.abs(e);for(h=0;h<e;h++)if(d.isColorParam(d.iToken+1)){var g=d.getArgbParam(++d.iToken);this.setShapeProperty(c,"colorRGB",Integer.$valueOf(g));null!=a&&a.append(" ").append(JU.Escape.escapeColor(g))}else if(d.iToken<b)this.invArg();
else break;return f},"JU.SB,~N,~N,~N");l(c$,"createFunction",function(a,b,c){var e=(new JS.ScriptEval).setViewer(this.vwr);try{e.compileScript(null,"function "+a+"("+b+") { return "+c+"}",!1);var d=new JU.Lst;for(a=0;a<b.length;a+=2)d.addLast(JS.SV.newV(3,Float.$valueOf(0)).setName(b.substring(a,a+1)));return[e.aatoken[0][1].value,d]}catch(f){if(Z(f,Exception))return null;throw f;}},"~S,~S,~S");l(c$,"floatArraySet",function(a,b,c){var e=this.tokAt(a++);1073742195==e&&(e=this.tokAt(a++));269484096!=
e&&this.invArg();for(var d=JU.AU.newFloat2(b),f=0;269484097!=e;)switch(e=this.getToken(a).tok,e){case 1073742195:case 269484097:continue;case 269484080:a++;break;case 269484096:a++;e=R(c,0);d[f++]=e;for(var h=0;h<c;h++)e[h]=this.floatParameter(a++),269484080==this.tokAt(a)&&a++;269484097!=this.tokAt(a++)&&this.invArg();e=0;f==b&&269484097!=this.tokAt(a)&&this.invArg();break;default:this.invArg()}return d},"~N,~N,~N");l(c$,"floatArraySetXYZ",function(a,b,c,e){var d=this.e,f=this.tokAt(a++);1073742195==
f&&(f=this.tokAt(a++));(269484096!=f||0>=b)&&this.invArg();for(var h=JU.AU.newFloat3(b,-1),g=0;269484097!=f;)switch(f=this.getToken(a).tok,f){case 1073742195:case 269484097:continue;case 269484080:a++;break;case 269484096:h[g++]=this.floatArraySet(a,c,e);a=++d.iToken;f=0;g==b&&269484097!=this.tokAt(a)&&this.invArg();break;default:this.invArg()}return h},"~N,~N,~N,~N");da(c$,"getBitsetIdent",function(a,b,c,e,d,f){var h=!V(c,JM.BondSet);h&&(null==b?b=this.vwr.getStandardLabelFormat(0):0==b.length&&
(b="%[label]"));var g=null==b?-1:b.indexOf("%"),k=2147483647!=d;if(null==a||this.chk||h&&0>g)return null==b&&(b=""),f?[b]:b;var g=this.vwr.ms,l=0,z=g.getLabeler();c=h||!e?null:c.getAssociatedAtoms();null==c&&(null!=b&&0<b.indexOf("%D"))&&(c=this.vwr.ms.getAtomIndices(a));e=null==b||0==b.length;var t=h||e?null:JM.LabelToken.getBondLabelValues();b=e?null:h?z.compile(this.vwr,b,"\x00",null):z.compile(this.vwr,b,"\u0001",t);var m=k?1:JU.BSUtil.cardinalityOf(a),H=Array(m),n=new JU.P3;for(d=k?d:a.nextSetBit(0);0<=
d;d=a.nextSetBit(d+1)){var I;h?I=e?g.at[d].getInfo():z.formatLabelAtomArray(this.vwr,g.at[d],b,"\x00",c,n):(I=g.getBondAt(d),I=e?I.getIdentity():z.formatLabelBond(this.vwr,I,b,t,c,n));I=JU.PT.formatStringI(I,"#",l+1);H[l++]=I;if(k)break}return 1==m&&!f?H[0]:H},"JU.BS,~S,~O,~B,~N,~B");l(c$,"listIsosurface",function(a){var b=3<this.slen?"0":0==this.tokAt(2)?"":" "+this.getToken(2).value;this.chk||this.showString(this.getShapeProperty(a,"list"+b));return!0},"~N");l(c$,"setShapeId",function(a,b,c){c&&
this.invArg();b=this.e.setShapeNameParameter(b).toLowerCase();this.setShapeProperty(a,"thisID",b);return b},"~N,~N,~B");l(c$,"parseDataArray",function(a,b){a=JU.Parser.fixDataString(a);var c=JU.Parser.markLines(a,"\n"),e=c.length;if(!b){for(var d=JU.AU.newFloat2(e),f=0,h=0;f<e;h=c[f++])h=JU.PT.getTokens(a.substring(h,c[f])),JU.PT.parseFloatArrayData(h,d[f]=R(h.length,0));return d}h=JU.PT.getTokens(a.substring(0,c[0]));if(3!=h.length)return R(0,0,0,0);var g=JU.PT.parseInt(h[0]),k=JU.PT.parseInt(h[1]),
l=JU.PT.parseInt(h[2]);if(1>g||1>k||1>l)return R(1,1,1,0);for(var d=JU.AU.newFloat3(g,k),z=0,t=0,f=1,h=c[0];f<e&&z<g;h=c[f++])h=JU.PT.getTokens(a.substring(h,c[f])),h.length<l||(JU.PT.parseFloatArrayData(h,d[z][t]=R(h.length,0)),++t==k&&(z++,t=0));return z!=g?(System.out.println("Error reading 3D data -- nX = "+g+", but only "+z+" blocks read"),R(1,1,1,0)):d},"~S,~B");Jb(c$,"ERROR_invalidArgument",22)})})(Clazz,Clazz.newLongArray,Clazz.doubleToByte,Clazz.doubleToInt,Clazz.doubleToLong,Clazz.declarePackage,
Clazz.instanceOf,Clazz.load,Clazz.instantialize,Clazz.decorateAsClass,Clazz.floatToInt,Clazz.floatToLong,Clazz.makeConstructor,Clazz.defineEnumConstant,Clazz.exceptionOf,Clazz.newIntArray,Clazz.defineStatics,Clazz.newFloatArray,Clazz.declareType,Clazz.prepareFields,Clazz.superConstructor,Clazz.newByteArray,Clazz.declareInterface,Clazz.p0p,Clazz.pu$h,Clazz.newShortArray,Clazz.innerTypeInstance,Clazz.isClassDefined,Clazz.prepareCallback,Clazz.newArray,Clazz.castNullAs,Clazz.floatToShort,Clazz.superCall,
Clazz.decorateAsType,Clazz.newBooleanArray,Clazz.newCharArray,Clazz.implementOf,Clazz.newDoubleArray,Clazz.overrideConstructor,Clazz.clone,Clazz.doubleToShort,Clazz.getInheritedLevel,Clazz.getParamsType,Clazz.isAF,Clazz.isAI,Clazz.isAS,Clazz.isASS,Clazz.isAP,Clazz.isAFloat,Clazz.isAII,Clazz.isAFF,Clazz.isAFFF,Clazz.tryToSearchAndExecute,Clazz.getStackTrace,Clazz.inheritArgs,Clazz.alert,Clazz.defineMethod,Clazz.overrideMethod,Clazz.declareAnonymous,Clazz.cloneFinals);
